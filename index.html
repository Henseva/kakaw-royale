<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="description" content="Sabores â€” A mais sofisticada vitrine gastronÃ´mica do Brasil.">
<meta name="theme-color" content="#0a0805">
<title>Sabores â€” Gastronomia de Elite</title>

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Sabores">
<link rel="manifest" id="pwa-manifest">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<style>
/* â”€â”€ RESET â”€â”€ */
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{overflow-x:hidden;background:#0a0805;cursor:none}
@media(max-width:768px){body{cursor:auto}}

/* â”€â”€ SCROLLBAR â”€â”€ */
::-webkit-scrollbar{width:3px}
::-webkit-scrollbar-thumb{background:linear-gradient(#E8520A,#C9A84C);border-radius:2px}
::-webkit-scrollbar-track{background:transparent}

/* â”€â”€ CURSOR â”€â”€ */
#cur{width:12px;height:12px;background:#E8520A;border-radius:50%;position:fixed;pointer-events:none;z-index:9998;transform:translate(-50%,-50%);transition:width .2s,height .2s,background .2s,border-radius .2s,opacity .2s}
#cur-r{width:44px;height:44px;border:1.5px solid rgba(232,82,10,.5);border-radius:50%;position:fixed;pointer-events:none;z-index:9997;transform:translate(-50%,-50%);transition:left .06s linear,top .06s linear,width .28s,height .28s,border-color .28s,background .28s}
#cur-emoji{position:fixed;pointer-events:none;z-index:9999;font-size:22px;transform:translate(-50%,-62%);opacity:0;transition:opacity .18s ease;line-height:1}
body.c-food #cur{opacity:0}
body.c-food #cur-emoji{opacity:1}
body.c-food #cur-r{width:54px;height:54px;border-color:rgba(232,82,10,.35);background:rgba(232,82,10,.06)}
body.c-drink #cur{opacity:0}
body.c-drink #cur-emoji{opacity:1}
body.c-drink #cur-r{width:54px;height:54px;border-color:rgba(201,168,76,.4);background:rgba(201,168,76,.06)}
body.c-chat #cur{background:#C9A84C;width:10px;height:10px}
body.c-chat #cur-r{width:64px;height:64px;border-color:rgba(201,168,76,.5);border-style:dashed}
body.ch #cur{width:16px;height:16px;background:#C9A84C}
body.ch #cur-r{width:60px;height:60px;border-color:rgba(201,168,76,.45);background:rgba(201,168,76,.04)}
@media(max-width:768px){#cur,#cur-r,#cur-emoji{display:none}}

/* â”€â”€ PROGRESS â”€â”€ */
#prog{position:fixed;top:0;left:0;height:2px;background:linear-gradient(90deg,#E8520A,#C9A84C,#E8520A);background-size:200%;z-index:9999;width:0;transition:width .08s linear;animation:shimmer 2s linear infinite}
@keyframes shimmer{to{background-position:200% 0}}

/* â”€â”€ LOADER â”€â”€ */
#ldr{position:fixed;inset:0;z-index:99999;background:#0a0805;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:opacity .9s ease,visibility .9s}
#ldr.out{opacity:0;visibility:hidden;pointer-events:none}
.ldr-logo{font-family:'Playfair Display',serif;font-size:clamp(52px,9vw,96px);font-weight:900;color:#f0e6d3;letter-spacing:-3px;overflow:hidden;display:flex}
.ldr-logo span{display:inline-block;animation:ldrUp .9s cubic-bezier(.22,1,.36,1) forwards;opacity:0;transform:translateY(110%)}
.ldr-logo span:nth-child(1){animation-delay:.05s}
.ldr-logo span:nth-child(2){animation-delay:.12s}
.ldr-logo span:nth-child(3){animation-delay:.19s;color:#E8520A}
.ldr-logo span:nth-child(4){animation-delay:.26s;color:#E8520A}
.ldr-logo span:nth-child(5){animation-delay:.33s;color:#E8520A}
.ldr-logo span:nth-child(6){animation-delay:.40s;color:#E8520A}
.ldr-logo span:nth-child(7){animation-delay:.47s;color:#E8520A}
.ldr-bar{width:140px;height:1px;background:rgba(255,255,255,.1);margin-top:48px;overflow:hidden}
.ldr-fill{height:100%;background:linear-gradient(90deg,#E8520A,#C9A84C);animation:ldrFill 1.9s ease forwards}
.ldr-tag{font-family:Inter,sans-serif;font-size:10px;letter-spacing:.25em;text-transform:uppercase;color:rgba(255,255,255,.28);margin-top:20px}
@keyframes ldrUp{to{opacity:1;transform:translateY(0)}}
@keyframes ldrFill{to{width:100%}}

/* â”€â”€ NOISE GRAIN OVERLAY â”€â”€ */
/* grain removed - was causing page to shake */

/* â”€â”€ KEYFRAMES â”€â”€ */
@keyframes fadeUp{from{opacity:0;transform:translateY(44px)}to{opacity:1;transform:none}}
@keyframes blink{0%,100%{border-color:currentColor}50%{border-color:transparent}}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.35;transform:scale(.7)}}
@keyframes bannerFlow{0%{background-position:0 0}100%{background-position:300% 0}}
@keyframes orbDrift{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(28px,-18px) scale(1.04)}66%{transform:translate(-18px,14px) scale(.97)}}
@keyframes fallLeaf{to{transform:translateY(110vh) rotate(720deg);opacity:0}}
@keyframes riseUp{0%{transform:translateY(0);opacity:0}15%{opacity:1}85%{opacity:.5}100%{transform:translateY(-110vh);opacity:0}}
@keyframes floatY{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
@keyframes scaleIn{from{opacity:0;transform:scale(.92) translateY(12px)}to{opacity:1;transform:none}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes cardGlow{0%,100%{box-shadow:0 0 30px rgba(232,82,10,0)}50%{box-shadow:0 0 60px rgba(232,82,10,0.25)}}
@keyframes textGrad{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}

/* â”€â”€ UTILS â”€â”€ */
.ns{scrollbar-width:none;-ms-overflow-style:none}
.ns::-webkit-scrollbar{display:none}
.glass{background:rgba(255,255,255,.042);backdrop-filter:blur(22px);-webkit-backdrop-filter:blur(22px);border:1px solid rgba(255,255,255,.08)}

/* â”€â”€ TILT CARD â”€â”€ */
.tilt{transform-style:preserve-3d;transition:transform .08s linear,box-shadow .4s}
.tilt:hover{box-shadow:0 40px 80px rgba(0,0,0,.55)}

/* â”€â”€ RESPONSIVE â”€â”€ */
@media(max-width:900px){
  .hero-grid{grid-template-columns:1fr!important}
  .hero-floats{display:none!important}
  .stats-grid{grid-template-columns:1fr 1fr!important}
  .footer-grid{grid-template-columns:1fr 1fr!important}
}
@media(max-width:600px){
  .stats-grid{grid-template-columns:1fr 1fr!important}
  .footer-grid{grid-template-columns:1fr!important}
  .promo-grid{grid-template-columns:1fr!important}
  .how-grid{grid-template-columns:1fr!important}
}
/* â”€â”€ NAV MOBILE â”€â”€ */
@media(max-width:600px){
  .nav-status{display:none!important}
  .nav-logo{font-size:22px!important}
  .nav-theme{display:none!important}
  .nav-cta{padding:9px 14px!important;font-size:11px!important}
  .hero-h1{min-height:3.2em}
}
@media(max-width:400px){
  .nav-cta span.cta-label{display:none}
}


/* â”€â”€ SEARCH â”€â”€ */
.srch-wrap{position:relative;max-width:680px;margin:0 auto 0}
.srch-input{width:100%;padding:16px 52px 16px 20px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:100px;color:#f0e6d3;font-family:Inter,sans-serif;font-size:14px;outline:none;transition:all .3s;backdrop-filter:blur(12px)}
.srch-input::placeholder{color:rgba(200,180,160,.45)}
.srch-input:focus{border-color:rgba(232,82,10,.5);background:rgba(255,255,255,.09);box-shadow:0 0 0 3px rgba(232,82,10,.1)}
.srch-icon{position:absolute;right:18px;top:50%;transform:translateY(-50%);font-size:18px;pointer-events:none}
.srch-tag{display:inline-flex;align-items:center;gap:6px;padding:5px 13px;border-radius:100px;background:rgba(232,82,10,.12);border:1px solid rgba(232,82,10,.25);color:rgba(255,107,43,.9);font-size:11px;font-family:Inter,sans-serif;font-weight:500;cursor:pointer;transition:all .22s;letter-spacing:.04em;margin:3px}
.srch-tag:hover{background:rgba(232,82,10,.22)}
.srch-tag.active{background:#E8520A;color:#fff;border-color:#E8520A}

/* â”€â”€ ADMIN PANEL â”€â”€ */
#admin{position:fixed;inset:0;z-index:50000;background:rgba(0,0,0,.92);backdrop-filter:blur(20px);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:all .4s}
#admin.open{opacity:1;visibility:visible}
.adm-box{background:#111009;border:1px solid rgba(232,82,10,.3);border-radius:24px;padding:40px;max-width:960px;width:95vw;max-height:90vh;overflow-y:auto;position:relative}
.adm-close{position:absolute;top:16px;right:20px;background:none;border:none;color:rgba(255,255,255,.5);font-size:24px;cursor:pointer;font-family:Inter,sans-serif}
.adm-tab{padding:8px 18px;border-radius:100px;font-size:11px;font-weight:600;font-family:Inter,sans-serif;cursor:pointer;border:1px solid rgba(255,255,255,.1);background:transparent;color:rgba(200,180,160,.6);transition:all .22s;letter-spacing:.05em}
.adm-tab.on{background:#E8520A;color:#fff;border-color:#E8520A}
.adm-kpi{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:16px;padding:20px 24px;text-align:center}
.adm-bar-wrap{background:rgba(255,255,255,.06);border-radius:4px;height:6px;overflow:hidden;margin-top:8px}
.adm-bar{height:100%;background:linear-gradient(90deg,#E8520A,#C9A84C);border-radius:4px;transition:width 1s cubic-bezier(.22,1,.36,1)}
.adm-row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid rgba(255,255,255,.05);font-family:Inter,sans-serif;font-size:12px}
.adm-badge{padding:2px 9px;border-radius:100px;font-size:9px;font-weight:700;letter-spacing:.06em}
.adm-input{width:100%;padding:10px 14px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:10px;color:#f0e6d3;font-family:Inter,sans-serif;font-size:13px;outline:none;margin-bottom:10px;transition:border .2s}
.adm-input:focus{border-color:rgba(232,82,10,.5)}
.adm-btn{padding:10px 22px;background:linear-gradient(135deg,#E8520A,#bf4008);color:#fff;border:none;border-radius:100px;font-family:Inter,sans-serif;font-size:12px;font-weight:700;cursor:pointer;letter-spacing:.05em;transition:all .25s}
.adm-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(232,82,10,.4)}

/* â”€â”€ TOAST NOTIFICATIONS â”€â”€ */
#toast-wrap{position:fixed;bottom:100px;left:50%;transform:translateX(-50%);z-index:40000;display:flex;flex-direction:column;gap:10px;align-items:center;pointer-events:none}
.toast{background:rgba(20,16,9,.95);border:1px solid rgba(232,82,10,.35);backdrop-filter:blur(16px);color:#f0e6d3;padding:13px 22px;border-radius:100px;font-family:Inter,sans-serif;font-size:13px;font-weight:500;white-space:nowrap;animation:toastIn .4s cubic-bezier(.22,1,.36,1) forwards;box-shadow:0 8px 32px rgba(0,0,0,.5);pointer-events:auto}
.toast.out{animation:toastOut .35s ease forwards}
@keyframes toastIn{from{opacity:0;transform:translateY(20px) scale(.9)}to{opacity:1;transform:none}}
@keyframes toastOut{to{opacity:0;transform:translateY(-10px) scale(.95)}}

/* â”€â”€ HEATMAP â”€â”€ */
.hm-dot{position:fixed;border-radius:50%;pointer-events:none;z-index:30000;animation:hmFade 2s ease forwards}
@keyframes hmFade{0%{opacity:.8;transform:scale(1)}100%{opacity:0;transform:scale(3)}}

/* â”€â”€ NOTIF STRIP â”€â”€ */
#notif-strip{position:fixed;top:0;left:0;right:0;z-index:20000;transform:translateY(-100%);transition:transform .5s cubic-bezier(.22,1,.36,1)}
#notif-strip.show{transform:translateY(0)}
.notif-inner{background:linear-gradient(135deg,#0d2010,#152a18);border-bottom:1px solid rgba(46,204,113,.25);padding:12px 20px;display:flex;align-items:center;justify-content:space-between;gap:12;font-family:Inter,sans-serif;font-size:12px;color:#b8f0c8}

/* â”€â”€ AB BADGE â”€â”€ */
.ab-badge{position:fixed;bottom:160px;right:28px;background:rgba(201,168,76,.15);border:1px solid rgba(201,168,76,.3);color:#C9A84C;font-family:Inter,sans-serif;font-size:9px;padding:4px 9px;border-radius:100px;letter-spacing:.08em;font-weight:600;z-index:400;opacity:.6}

/* â”€â”€ GEO BADGE â”€â”€ */
.geo-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(46,204,113,.08);border:1px solid rgba(46,204,113,.2);color:#2ecc71;font-family:Inter,sans-serif;font-size:10px;padding:5px 13px;border-radius:100px;font-weight:500;letter-spacing:.05em;animation:fadeUp .6s .2s both}

/* â”€â”€ TRENDING BADGE â”€â”€ */
.trend-ring{position:absolute;top:-4px;right:-4px;width:18px;height:18px;background:linear-gradient(135deg,#E8520A,#C9A84C);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:9px;z-index:3;animation:pulse 2s infinite;border:2px solid #141009}

/* â”€â”€ RATING ALERT â”€â”€ */
.rating-alert{background:rgba(231,76,60,.1);border:1px solid rgba(231,76,60,.3);border-radius:12px;padding:12px 16px;font-family:Inter,sans-serif;font-size:12px;color:#ff6b6b;margin-bottom:10px;display:flex;align-items:center;gap:10px}


/* â”€â”€ NETFLIX ROWS â”€â”€ */
.nfx-section{padding:0 0 56px}
.nfx-row{margin-bottom:48px}
.nfx-row-header{display:flex;align-items:baseline;justify-content:space-between;padding:0 28px;margin-bottom:16px}
.nfx-row-title{font-family:'Playfair Display',serif;font-size:clamp(18px,2.5vw,26px);font-weight:700;color:var(--cream,#f0e6d3);letter-spacing:-.5px}
.nfx-row-title em{color:#E8520A;font-style:italic}
.nfx-row-seeall{font-family:Inter,sans-serif;font-size:11px;font-weight:600;color:rgba(232,82,10,.8);text-decoration:none;letter-spacing:.08em;text-transform:uppercase;transition:color .2s;white-space:nowrap}
.nfx-row-seeall:hover{color:#E8520A}
.nfx-track{display:flex;gap:16px;overflow-x:auto;padding:8px 28px 16px;scrollbar-width:none;-ms-overflow-style:none;scroll-snap-type:x proximity}
.nfx-track::-webkit-scrollbar{display:none}
.nfx-card{flex:0 0 260px;border-radius:20px;overflow:hidden;text-decoration:none;display:block;scroll-snap-align:start;transition:transform .35s cubic-bezier(.22,1,.36,1),box-shadow .35s;position:relative;transform-origin:left center}
.nfx-card:hover{transform:scale(1.04) translateY(-4px);z-index:10}
.nfx-card:first-child{margin-left:0}
.nfx-img{height:160px;display:flex;align-items:center;justify-content:center;font-size:60px;position:relative;overflow:hidden}
.nfx-img-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 50%,rgba(0,0,0,.7) 100%)}
.nfx-body{padding:14px 16px 16px}
.nfx-from{font-size:9px;color:rgba(200,180,160,.55);text-transform:uppercase;letter-spacing:.12em;font-family:Inter,sans-serif;font-weight:500;margin-bottom:4px}
.nfx-name{font-family:'Playfair Display',serif;font-size:15px;font-weight:700;line-height:1.2;margin-bottom:6px;letter-spacing:-.3px}
.nfx-meta{display:flex;justify-content:space-between;align-items:center}
.nfx-price{font-family:'Playfair Display',serif;font-size:18px;font-weight:900;letter-spacing:-1px}
.nfx-price sup{font-family:Inter,sans-serif;font-size:10px;font-weight:400;vertical-align:super}
.nfx-badge{font-size:9px;padding:3px 9px;border-radius:100px;font-family:Inter,sans-serif;font-weight:700;letter-spacing:.05em}
.nfx-arrow{position:absolute;top:0;bottom:0;width:44px;display:flex;align-items:center;justify-content:center;background:rgba(10,8,5,.6);backdrop-filter:blur(8px);border:none;cursor:pointer;font-size:18px;color:rgba(255,255,255,.8);z-index:20;transition:all .25s;opacity:0}
.nfx-row-wrap:hover .nfx-arrow{opacity:1}
.nfx-arrow-l{left:0;border-radius:0 12px 12px 0}
.nfx-arrow-r{right:0;border-radius:12px 0 0 12px}
.nfx-arrow:hover{background:rgba(232,82,10,.8);color:#fff}


/* â”€â”€ CHEF IA CHAT â”€â”€ */
#chef-btn{position:fixed;bottom:92px;left:24px;z-index:700;width:54px;height:54px;background:linear-gradient(135deg,#C9A84C,#8a5e00);border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:24px;box-shadow:0 4px 24px rgba(201,168,76,.5);transition:all .35s cubic-bezier(.22,1,.36,1)}
#chef-btn:hover{transform:scale(1.14) rotate(8deg);box-shadow:0 10px 44px rgba(201,168,76,.7)}
#chef-btn .chef-pulse{position:absolute;top:-2px;right:-2px;width:12px;height:12px;background:#2ecc71;border-radius:50%;border:2px solid #0a0805;animation:pulse 2s infinite}
#chef-panel{position:fixed;bottom:0;left:0;width:380px;max-width:100vw;height:560px;max-height:90vh;z-index:800;display:flex;flex-direction:column;background:#0e0c08;border:1px solid rgba(201,168,76,.25);border-radius:0 24px 0 0;box-shadow:0 -8px 60px rgba(0,0,0,.7);transform:translateY(calc(100% + 10px));transition:transform .55s cubic-bezier(.22,1,.36,1);overflow:hidden}
#chef-panel.open{transform:translateY(0)}
.chef-head{padding:18px 20px 14px;background:linear-gradient(135deg,rgba(201,168,76,.12),rgba(232,82,10,.06));border-bottom:1px solid rgba(201,168,76,.15);display:flex;align-items:center;gap:12;flex-shrink:0}
.chef-avatar{width:40px;height:40px;background:linear-gradient(135deg,#C9A84C,#E8520A);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.chef-title{font-family:'Playfair Display',serif;font-size:15px;font-weight:700;color:#f0e6d3;letter-spacing:-.3px}
.chef-sub{font-size:10px;color:rgba(201,168,76,.7);font-family:Inter,sans-serif;letter-spacing:.06em}
.chef-close{margin-left:auto;background:none;border:none;color:rgba(255,255,255,.4);cursor:pointer;font-size:20px;line-height:1;padding:4px;transition:color .2s;flex-shrink:0}
.chef-close:hover{color:rgba(255,255,255,.8)}
.chef-msgs{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12;scrollbar-width:thin;scrollbar-color:rgba(201,168,76,.2) transparent}
.chef-msgs::-webkit-scrollbar{width:3px}
.chef-msgs::-webkit-scrollbar-thumb{background:rgba(201,168,76,.2);border-radius:2px}
.chef-msg{max-width:85%;animation:fadeUp .3s cubic-bezier(.22,1,.36,1)}
.chef-msg.ai{align-self:flex-start}
.chef-msg.user{align-self:flex-end}
.chef-bubble{padding:11px 15px;border-radius:18px;font-family:Inter,sans-serif;font-size:13px;line-height:1.6;font-weight:300}
.chef-msg.ai .chef-bubble{background:rgba(201,168,76,.1);border:1px solid rgba(201,168,76,.18);color:#f0e6d3;border-radius:4px 18px 18px 18px}
.chef-msg.user .chef-bubble{background:linear-gradient(135deg,#E8520A,#bf4008);color:#fff;border-radius:18px 4px 18px 18px}
.chef-typing{display:flex;gap:4px;padding:10px 14px;align-items:center}
.chef-typing span{width:6px;height:6px;background:rgba(201,168,76,.6);border-radius:50%;animation:typingDot 1.2s ease-in-out infinite}
.chef-typing span:nth-child(2){animation-delay:.2s}
.chef-typing span:nth-child(3){animation-delay:.4s}
@keyframes typingDot{0%,60%,100%{transform:translateY(0);opacity:.4}30%{transform:translateY(-5px);opacity:1}}
.chef-footer{padding:12px 14px 16px;border-top:1px solid rgba(201,168,76,.12);display:flex;gap:8;flex-shrink:0;align-items:flex-end}
.chef-input{flex:1;background:rgba(255,255,255,.06);border:1px solid rgba(201,168,76,.2);border-radius:14px;padding:10px 14px;color:#f0e6d3;font-family:Inter,sans-serif;font-size:13px;outline:none;resize:none;max-height:90px;transition:border .2s;line-height:1.5}
.chef-input:focus{border-color:rgba(201,168,76,.5);background:rgba(255,255,255,.08)}
.chef-input::placeholder{color:rgba(200,180,160,.35)}
.chef-send{width:40px;height:40px;background:linear-gradient(135deg,#C9A84C,#8a5e00);border:none;border-radius:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;transition:all .25s;align-self:flex-end}
.chef-send:hover{transform:scale(1.1);box-shadow:0 4px 16px rgba(201,168,76,.4)}
.chef-send:disabled{opacity:.4;cursor:not-allowed;transform:none}
.chef-chips{display:flex;gap:6px;flex-wrap:wrap;padding:8px 14px 0}
.chef-chip{padding:5px 12px;background:rgba(201,168,76,.08);border:1px solid rgba(201,168,76,.2);border-radius:100px;font-size:10px;color:rgba(201,168,76,.85);font-family:Inter,sans-serif;cursor:pointer;transition:all .2s;white-space:nowrap;font-weight:500}
.chef-chip:hover{background:rgba(201,168,76,.18);color:#C9A84C}
@media(max-width:420px){#chef-panel{width:100vw;border-radius:24px 24px 0 0;bottom:0;left:0}}


/* â”€â”€ SABOR DO MOMENTO â”€â”€ */
.momento-section{position:relative;overflow:hidden;transition:background 1.2s ease}
.momento-clock{font-family:'Playfair Display',serif;font-size:clamp(72px,14vw,160px);font-weight:900;line-height:.85;letter-spacing:-6px;opacity:.06;position:absolute;right:-20px;top:50%;transform:translateY(-50%);pointer-events:none;user-select:none}
.momento-live{display:inline-flex;align-items:center;gap:8px;padding:6px 16px;border-radius:100px;font-family:Inter,sans-serif;font-size:10px;font-weight:700;letter-spacing:.18em;text-transform:uppercase;margin-bottom:28px}
.momento-live::before{content:'';width:6px;height:6px;border-radius:50%;display:inline-block;animation:pulse 1.5s infinite}
.momento-period{font-family:'Playfair Display',serif;font-size:clamp(36px,6vw,72px);font-weight:900;line-height:.95;letter-spacing:-2.5px;margin-bottom:16px}
.momento-sub{font-family:Inter,sans-serif;font-size:14px;font-weight:300;line-height:1.75;max-width:420px;margin-bottom:36px;opacity:.75}
.momento-card{border-radius:28px;overflow:hidden;text-decoration:none;display:flex;align-items:center;gap:24px;padding:28px 32px;border:1px solid rgba(255,255,255,.1);backdrop-filter:blur(16px);transition:transform .4s cubic-bezier(.22,1,.36,1),box-shadow .4s;position:relative;max-width:480px}
.momento-card:hover{transform:translateY(-6px) scale(1.02)}
.momento-card-emoji{font-size:72px;line-height:1;flex-shrink:0;filter:drop-shadow(0 12px 24px rgba(0,0,0,.5));transition:transform .5s cubic-bezier(.22,1,.36,1)}
.momento-card:hover .momento-card-emoji{transform:translateY(-8px) rotate(6deg) scale(1.1)}
.momento-tag{font-size:9px;font-family:Inter,sans-serif;font-weight:700;letter-spacing:.14em;text-transform:uppercase;opacity:.7;margin-bottom:6px}
.momento-dish{font-family:'Playfair Display',serif;font-size:22px;font-weight:700;line-height:1.15;letter-spacing:-.5px;margin-bottom:4px}
.momento-rest{font-size:11px;font-family:Inter,sans-serif;font-weight:400;opacity:.6;margin-bottom:16px}
.momento-cta{display:inline-flex;align-items:center;gap:8px;padding:10px 22px;border-radius:100px;font-family:Inter,sans-serif;font-size:12px;font-weight:700;letter-spacing:.05em;text-decoration:none;transition:all .28s;border:none;cursor:pointer}
.momento-time-wrap{display:flex;align-items:center;gap:10px;margin-bottom:12px}
.momento-time-display{font-family:'Playfair Display',serif;font-size:48px;font-weight:900;letter-spacing:-2px;line-height:1}
.momento-time-colon{animation:blink .9s step-end infinite;opacity:.7}
@media(max-width:600px){.momento-card{flex-direction:column;text-align:center;padding:24px}.momento-clock{display:none}}

</style>
</head>
<body>
<div id="prog"></div>
<div id="cur"></div>
<div id="cur-r"></div>
<div id="cur-emoji"></div>
<div id="ldr">
  <div class="ldr-logo">
    <span>S</span><span>a</span><span>b</span><span>o</span><span>r</span><span>e</span><span>s</span>
  </div>
  <div class="ldr-bar"><div class="ldr-fill"></div></div>
  <div class="ldr-tag">gastronomia de elite Â· est. 2024</div>
</div>
<div id="root"></div>

<script>
'use strict';
const {createElement:h,useState,useEffect,useRef,useCallback,Fragment}=React;


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ENGINE â€” Analytics, Personalization, A/B, NLP, Admin, PWA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

// â”€â”€ PWA Manifest (client-side injection) â”€â”€
(function(){
  const manifest={name:'Sabores',short_name:'Sabores',description:'Gastronomia de elite',start_url:'./',display:'standalone',background_color:'#0a0805',theme_color:'#E8520A',icons:[{src:'https://emojicdn.elk.sh/ðŸ½?style=apple&size=192',sizes:'192x192',type:'image/png'},{src:'https://emojicdn.elk.sh/ðŸ½?style=apple&size=512',sizes:'512x512',type:'image/png'}]};
  const blob=new Blob([JSON.stringify(manifest)],{type:'application/json'});
  const url=URL.createObjectURL(blob);
  const link=document.getElementById('pwa-manifest');
  if(link)link.href=url;
})();

// â”€â”€ Service Worker (offline cache) â”€â”€
if('serviceWorker' in navigator){
  const sw=`
    const V='sabores-v1';
    self.addEventListener('install',e=>e.waitUntil(caches.open(V).then(c=>c.addAll(['./',location.href]))));
    self.addEventListener('fetch',e=>e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request))));
  `;
  const blob=new Blob([sw],{type:'text/javascript'});
  navigator.serviceWorker.register(URL.createObjectURL(blob)).catch(()=>{});
}

// â”€â”€ Storage helpers â”€â”€
const LS={
  get:(k,def=null)=>{try{const v=localStorage.getItem(k);return v!==null?JSON.parse(v):def;}catch{return def;}},
  set:(k,v)=>{try{localStorage.setItem(k,JSON.stringify(v));}catch{}},
};

// â”€â”€ Analytics Engine â”€â”€
const Analytics={
  // Track a click event
  track(type,id){
    const key='sab_clicks_'+type;
    const data=LS.get(key,{});
    data[id]=(data[id]||0)+1;
    LS.set(key,data);
    // Also update session
    const sess=LS.get('sab_session',{start:Date.now(),clicks:0,pages:{}});
    sess.clicks++;
    sess.pages[id]=(sess.pages[id]||0)+1;
    LS.set('sab_session',sess);
  },
  // Get sorted items by click count
  sort(type,items,idKey){
    const data=LS.get('sab_clicks_'+type,{});
    return [...items].sort((a,b)=>(data[b[idKey]]||0)-(data[a[idKey]]||0));
  },
  // Get top item
  top(type,items,idKey){
    const data=LS.get('sab_clicks_'+type,{});
    let best=items[0];let max=0;
    items.forEach(i=>{const c=data[i[idKey]]||0;if(c>max){max=c;best=i;}});
    return best;
  },
  // Get all stats
  stats(){
    return{
      dishes:LS.get('sab_clicks_dish',{}),
      cats:LS.get('sab_clicks_cat',{}),
      rests:LS.get('sab_clicks_rest',{}),
      drinks:LS.get('sab_clicks_drink',{}),
      totalClicks:Object.values(LS.get('sab_clicks_dish',{})).reduce((a,b)=>a+b,0),
      session:LS.get('sab_session',{start:Date.now(),clicks:0}),
    };
  },
  // Heatmap click
  heatClick(x,y){
    const hm=LS.get('sab_heatmap',[]);
    hm.push({x:Math.round(x/window.innerWidth*100),y:Math.round(y/window.innerHeight*100),t:Date.now()});
    if(hm.length>200)hm.shift();
    LS.set('sab_heatmap',hm);
  },
  // CTR per dish
  ctr(dishName){
    const clicks=LS.get('sab_clicks_dish',{})[dishName]||0;
    const views=LS.get('sab_views_dish',{})[dishName]||1;
    return((clicks/views)*100).toFixed(1)+'%';
  },
  // Mark dish as viewed
  view(dishName){
    const v=LS.get('sab_views_dish',{});
    v[dishName]=(v[dishName]||0)+1;
    LS.set('sab_views_dish',v);
  },
};

// â”€â”€ A/B Testing Engine â”€â”€
const AB={
  // Get or assign variant (persisted)
  variant(test,variants){
    const key='sab_ab_'+test;
    const existing=LS.get(key);
    if(existing&&variants.includes(existing))return existing;
    const v=variants[Math.floor(Math.random()*variants.length)];
    LS.set(key,v);
    return v;
  },
  // Track conversion
  convert(test){
    const key='sab_ab_conv_'+test;
    const data=LS.get(key,{});
    const v=LS.get('sab_ab_'+test,'A');
    data[v]=(data[v]||0)+1;
    LS.set(key,data);
  },
  // Get results
  results(test){
    return{variant:LS.get('sab_ab_'+test,'A'),conversions:LS.get('sab_ab_conv_'+test,{})};
  },
};

// â”€â”€ Geolocation Engine â”€â”€
const Geo={
  _cache:null,
  async detect(){
    if(this._cache)return this._cache;
    const cached=LS.get('sab_geo');
    if(cached&&Date.now()-cached.ts<86400000)return(this._cache=cached);
    return new Promise(res=>{
      if(!navigator.geolocation)return res(null);
      navigator.geolocation.getCurrentPosition(
        pos=>{
          const data={lat:pos.coords.latitude,lng:pos.coords.longitude,ts:Date.now(),
            city:pos.coords.latitude>-10&&pos.coords.latitude<5?'Norte':
                 pos.coords.latitude>-25&&pos.coords.latitude<-10?'Sudeste':
                 pos.coords.latitude<-25?'Sul':'Centro-Oeste'};
          LS.set('sab_geo',data);this._cache=data;res(data);
        },
        ()=>res(null),{timeout:5000}
      );
    });
  },
};

// â”€â”€ NLP Search Engine â”€â”€
const NLP={
  // Map natural language to categories/filters
  INTENTS:{
    pizza:['pizza','napoli','italiana','margherita'],
    burger:['burger','hamburguer','smash','wagyu'],
    sushi:['japonÃªs','japonesa','sushi','temaki','omakase'],
    churrasco:['churrasco','costela','angus','brasa','carne'],
    massa:['massa','massas','italiano','italiana','fettucine','espaguete'],
    mexicano:['mexicano','mexicana','tacos','burrito'],
    acai:['aÃ§aÃ­','acai','amazÃ´nico','bowl'],
    saudavel:['saudÃ¡vel','fit','orgÃ¢nico','vegano','vegetariano','natural'],
    barato:['barato','econÃ´mico','em conta','popular'],
    premium:['premium','gourmet','especial','exclusivo','chef'],
    rapido:['rÃ¡pido','rÃ¡pida','urgente','agora','fome','imediato'],
    promocao:['promoÃ§Ã£o','promoÃ§Ãµes','desconto','oferta'],
  },
  parse(query){
    const q=query.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');
    const result={cats:[],filter:null,tags:[]};
    Object.entries(this.INTENTS).forEach(([intent,words])=>{
      if(words.some(w=>q.includes(w))){
        if(['barato','premium','rapido','promocao'].includes(intent)){
          if(intent==='premium')result.filter='Premium';
          if(intent==='promocao')result.filter='PromoÃ§Ãµes';
          result.tags.push(intent);
        } else {
          result.cats.push(intent);
        }
      }
    });
    return result;
  },
  // Filter dishes by parsed intent
  filterDishes(dishes,query){
    if(!query||!query.trim())return dishes;
    const {cats,filter,tags}=this.parse(query);
    if(!cats.length&&!filter&&!tags.length)return dishes;
    return dishes.filter(d=>{
      const text=(d.name+d.desc+d.from+d.e).toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');
      const allWords=Object.values(this.INTENTS).flat();
      if(filter&&d.tag!==filter&&!cats.length)return false;
      return cats.some(c=>this.INTENTS[c]?.some(w=>text.includes(w)))||
             (cats.length===0&&filter&&d.tag===filter)||
             (cats.length===0&&tags.length&&tags.some(t=>this.INTENTS[t]?.some(w=>text.includes(w))));
    });
  },
};

// â”€â”€ Rating Monitor (simulated, would be real API) â”€â”€
const RatingMonitor={
  _alerts:[],
  check(restaurants){
    this._alerts=[];
    restaurants.forEach(r=>{
      const stored=LS.get('sab_rating_'+r.name,parseFloat(r.rating));
      const current=parseFloat(r.rating);
      if(current<4.5)this._alerts.push({name:r.name,rating:current,prev:stored,drop:stored-current>0});
      LS.set('sab_rating_'+r.name,current);
    });
    return this._alerts;
  },
  getAlerts(){return this._alerts;},
};

// â”€â”€ Toast System â”€â”€
const Toast={
  _wrap:null,
  _init(){
    if(this._wrap)return;
    this._wrap=document.createElement('div');
    this._wrap.id='toast-wrap';
    document.body.appendChild(this._wrap);
  },
  show(msg,duration=3500){
    this._init();
    const el=document.createElement('div');
    el.className='toast';el.textContent=msg;
    this._wrap.appendChild(el);
    setTimeout(()=>{el.classList.add('out');setTimeout(()=>el.remove(),400);},duration);
  },
};

// â”€â”€ Heatmap visual dot â”€â”€
function spawnHeatDot(x,y){
  const dot=document.createElement('div');
  dot.className='hm-dot';
  dot.style.cssText=`left:${x-10}px;top:${y-10}px;width:20px;height:20px;background:radial-gradient(circle,rgba(232,82,10,.6) 0%,transparent 70%)`;
  document.body.appendChild(dot);
  setTimeout(()=>dot.remove(),2100);
}

// â”€â”€ Daily Top Dish â”€â”€
function getDailyTop(dishes){
  const day=new Date().toDateString();
  const key='sab_daily_'+day;
  const cached=LS.get(key);
  if(cached)return dishes.find(d=>d.name===cached)||dishes[0];
  // Mix analytics + day-based seed for consistent daily pick
  const sorted=Analytics.sort('dish',dishes,'name');
  // If we have real data, use that, otherwise rotate by day
  const dayIdx=new Date().getDate()%dishes.length;
  const pick=sorted[0]?.name?(Analytics.stats().totalClicks>0?sorted[0]:dishes[dayIdx]):dishes[dayIdx];
  LS.set(key,pick.name);
  return pick;
}

// â”€â”€ Push Notifications (with SW) â”€â”€
const Notif={
  async request(){
    if(!('Notification' in window))return false;
    if(Notification.permission==='granted')return true;
    const perm=await Notification.requestPermission();
    return perm==='granted';
  },
  async send(title,body,icon='ðŸ½'){
    const granted=await this.request();
    if(!granted)return;
    if(Notification.permission==='granted'){
      new Notification(title,{body,icon:'https://emojicdn.elk.sh/'+encodeURIComponent(icon)+'?style=apple'});
    }
  },
  scheduleWelcome(){
    const shown=LS.get('sab_notif_welcome');
    if(shown)return;
    setTimeout(async()=>{
      const granted=await this.request();
      if(granted){
        LS.set('sab_notif_welcome',true);
        this.send('ðŸ½ Sabores','Hoje temos pratos especiais selecionados para vocÃª!','ðŸ•');
      }
    },8000);
  },
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const CATS=[
  {e:"ðŸ•",l:"Pizza",q:"pizza"},{e:"ðŸ”",l:"Burger",q:"burger"},
  {e:"ðŸ£",l:"JaponÃªs",q:"sushi"},{e:"ðŸ¥©",l:"Churrasco",q:"churrasco"},
  {e:"ðŸ",l:"Massas",q:"massa+italiana"},{e:"ðŸŒ®",l:"Mexicano",q:"tacos+mexicano"},
  {e:"ðŸ‡",l:"AÃ§aÃ­",q:"acai"},{e:"ðŸ¥—",l:"SaudÃ¡vel",q:"saudavel+fit"},
  {e:"ðŸ—",l:"Frango",q:"frango+frito"},{e:"ðŸ°",l:"Doces",q:"sobremesa+doce"},
  {e:"ðŸ¥¦",l:"Vegano",q:"vegano"},{e:"ðŸ§ƒ",l:"Bebidas",q:"bebida+suco"},
];

const DISHES=[
  {e:"ðŸ•",badge:"ðŸ”¥ +2840 pedidos",from:"Bella Napoli",stars:4.9,reviews:2840,name:"Pizza Margherita Trufada",desc:"Massa fermentada 72h, molho San Marzano DOP, mozzarella di bufala campana e trufa negra ralada na hora.",price:"54",time:"25",frete:"GrÃ¡tis",q:"pizza+margherita",bg:"linear-gradient(145deg,#1c1005,#2e1c0a,#1c1005)",tag:"Mais pedidos"},
  {e:"ðŸ±",badge:"âœ¦ Omakase",from:"Sakura House",stars:4.8,reviews:1920,name:"Omakase do Chef",desc:"32 peÃ§as exclusivas: salmÃ£o selvagem do Alasca, atum bluefin, vieira e temaki com ikura fresco importado.",price:"129",time:"35",frete:"R$5",q:"omakase+sushi+premium",bg:"linear-gradient(145deg,#061510,#0d2a1c,#061510)",tag:"Premium"},
  {e:"ðŸ”",badge:"âš¡ Novo",from:"Crush Burger",stars:4.7,reviews:3210,name:"Smash Wagyu Double",desc:"Dois patties de wagyu A5 smashados na chapa de ferro fundido, raclette derretido e picles artesanal.",price:"68",time:"20",frete:"GrÃ¡tis",q:"smash+wagyu+burger",bg:"linear-gradient(145deg,#1c0d04,#301a08,#1c0d04)",tag:"Novidades"},
  {e:"ðŸ¥©",badge:"ðŸ† Top Cidade",from:"Fogo e Brasa",stars:4.9,reviews:4180,name:"Costela Black Angus",desc:"14 horas de cozimento lento em defumaÃ§Ã£o de lenha. Desfia no garfo, serve com vinagrete de hortelÃ£.",price:"97",time:"40",frete:"R$8",q:"costela+angus+brasa+premium",bg:"linear-gradient(145deg,#0a0e18,#15202e,#0a0e18)",tag:"Mais pedidos"},
  {e:"ðŸ‡",badge:"ðŸŒ¿ OrgÃ¢nico",from:"RaÃ­zes do Norte",stars:4.8,reviews:1560,name:"Bowl AmazÃ´nico Premium",desc:"AÃ§aÃ­ nativo do ParÃ¡, granola com castanha-do-parÃ¡ torrada, frutas sazonais e pÃ³len de flores silvestres.",price:"38",time:"15",frete:"GrÃ¡tis",q:"bowl+acai+organico+amazonia",bg:"linear-gradient(145deg,#1c0808,#301212,#1c0808)",tag:"PromoÃ§Ãµes"},
  {e:"ðŸŒ®",badge:"ðŸŒ¶ Chef's Pick",from:"El Rancho",stars:4.7,reviews:920,name:"Trio Tacos Signature",desc:"Al pastor com abacaxi grelhado, carnitas de 8h e birria com consommÃ© para mergulhar. AutÃªntico MÃ©xico.",price:"56",time:"30",frete:"R$3",q:"tacos+birria+al+pastor+signature",bg:"linear-gradient(145deg,#12091c,#211030,#12091c)",tag:"PromoÃ§Ãµes"},
];

const DRINKS=[
  {e:"ðŸ¥¤",name:"Limonada SuÃ­Ã§a Signature",desc:"LimÃ£o siciliano premium, leite condensado belga, menta fresca e raspas. A nossa favorita.",price:"22",bg:"linear-gradient(145deg,#061c06,#0d3a10)",badge:"ðŸŒ¿ Signature",kcal:"180 kcal",time:"5 min"},
  {e:"ðŸ§ƒ",name:"Cold Press Manga",desc:"Manga Tommy prensada a frio, sem pasteurizaÃ§Ã£o. Vitaminas e enzimas 100% intactas.",price:"18",bg:"linear-gradient(145deg,#281200,#542800)",badge:"ðŸ”¥ Raw",kcal:"120 kcal",time:"imediato"},
  {e:"ðŸµ",name:"Hibisco Kombucha",desc:"FermentaÃ§Ã£o artesanal de 21 dias. ProbiÃ³ticos vivos, gengibre e mel de abelhas nativas da Mata AtlÃ¢ntica.",price:"24",bg:"linear-gradient(145deg,#200010,#480028)",badge:"âœ¦ Fermentado",kcal:"60 kcal",time:"imediato"},
  {e:"ðŸ¥›",name:"AÃ§aÃ­ Power Shake",desc:"AÃ§aÃ­ puro, banana da terra, aveia belga, proteÃ­na whey natural e mel de baru. Energia para o dia.",price:"28",bg:"linear-gradient(145deg,#100520,#280a44)",badge:"ðŸ’œ Boost",kcal:"340 kcal",time:"8 min"},
  {e:"ðŸ¹",name:"Coco Loco Artesanal",desc:"Ãgua de coco verde gelada, espuma de maracujÃ¡ fresco e finalizado com raspas de coco tostado.",price:"32",bg:"linear-gradient(145deg,#041a1a,#083535)",badge:"ðŸŒ´ Coquetel",kcal:"180 kcal",time:"imediato"},
];

const RESTAURANTS=[
  {icon:"ðŸ•",name:"Bella Napoli",type:"Pizzaria Napoletana",tags:["Certificado AVPN","Forno a lenha 450Â°"],rating:"4.9",orders:"12k+",q:"Bella+Napoli+pizza"},
  {icon:"ðŸ±",name:"Sakura House",type:"Omakase Premium",tags:["Peixes importados","Reserva antecipada"],rating:"4.8",orders:"8k+",q:"Sakura+omakase+sushi"},
  {icon:"ðŸ”",name:"Crush Burger",type:"Smash Premium",tags:["Wagyu A5","Chapa ferro fundido"],rating:"4.7",orders:"21k+",q:"smash+wagyu+burger"},
  {icon:"ðŸ”¥",name:"Fogo e Brasa",type:"Churrascaria Prime",tags:["Black Angus","Dry Aged 30d"],rating:"4.9",orders:"18k+",q:"churrasco+prime+angus+brasa"},
  {icon:"ðŸŒ¿",name:"RaÃ­zes do Norte",type:"OrgÃ¢nicos & AÃ§aÃ­",tags:["100% Certificado","Sem agrotÃ³xico"],rating:"4.8",orders:"9k+",q:"acai+organico+norte"},
  {icon:"ðŸŒ®",name:"El Rancho",type:"Mexicano AutÃªntico",tags:["Birria tradicional","Mezcal artesanal"],rating:"4.7",orders:"6k+",q:"tacos+birria+mexicano+autentico"},
  {icon:"ðŸ",name:"Pasta Mia",type:"Massas Frescas",tags:["Feita na hora","Farinha importada","DOP"],rating:"4.8",orders:"11k+",q:"massa+fresca+italiana+artesanal"},
];

const STATS=[
  {v:12000,s:"+",l:"Pedidos/mÃªs",i:"ðŸ›µ"},
  {v:98,s:"%",l:"SatisfaÃ§Ã£o",i:"â­"},
  {v:47,s:"",l:"Parceiros",i:"ðŸ½"},
  {v:18,s:"min",l:"Entrega mÃ©dia",i:"âš¡"},
];

const HOW=[
  {n:"01",icon:"ðŸ”",title:"Descubra",desc:"Navegue pela nossa curadoria de pratos e restaurantes selecionados a dedo por especialistas gastronÃ´micos."},
  {n:"02",icon:"â¤ï¸",title:"Escolha",desc:"Salve seus favoritos, explore os detalhes, compare avaliaÃ§Ãµes e tome a decisÃ£o perfeita."},
  {n:"03",icon:"ðŸ›µ",title:"PeÃ§a",desc:"Um clique leva vocÃª direto ao iFood. Seu pedido sai com desconto e chega quentinho em minutos."},
];

const TESTIMONIALS=[
  {name:"Carolina M.",role:"Chef Executiva Â· D.O.M.",text:"Uma vitrine que finalmente faz jus Ã  qualidade dos restaurantes parceiros. O design Ã© impecÃ¡vel e a experiÃªncia de descoberta Ã© genuinamente prazerosa.",avatar:"ðŸ‘©â€ðŸ³",stars:5},
  {name:"Rafael Torres",role:"CrÃ­tico GastronÃ´mico",text:"NavegaÃ§Ã£o fluida, curadoria irrepreensÃ­vel. Ã‰ exatamente o que o mercado precisava â€” uma ponte digna entre o comensal exigente e os melhores restaurantes.",avatar:"ðŸ‘¨â€ðŸ’¼",stars:5},
  {name:"Ana Lima",role:"Influencer & Food Writer",text:"Uso todos os dias. A seÃ§Ã£o de bebidas Ã© absolutamente belÃ­ssima e os cards dos pratos me fazem pedir mais do que devia. NÃ£o consigo parar.",avatar:"ðŸ‘©â€ðŸ’»",stars:5},
];

const FILTERS=["Todos","Mais pedidos","Novidades","Premium","PromoÃ§Ãµes"];
const HOURS=[
  {day:"Segunda",range:"11hâ€“22h"},{day:"TerÃ§a",range:"11hâ€“22h"},
  {day:"Quarta",range:"11hâ€“22h"},{day:"Quinta",range:"11hâ€“23h"},
  {day:"Sexta",range:"11hâ€“00h"},{day:"SÃ¡bado",range:"10hâ€“00h"},
  {day:"Domingo",range:"10hâ€“22h"},
];

const iurl=q=>`https://www.ifood.com.br/delivery/busca?q=${q}`;
function storeOpen(){
  const n=new Date(),d=n.getDay(),hr=n.getHours()+n.getMinutes()/60;
  if(d===0)return hr>=10&&hr<22; if(d===6)return hr>=10;
  if(d===5)return hr>=11;        if(d===4)return hr>=11&&hr<23;
  return hr>=11&&hr<22;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PALETTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function pal(dk){
  return dk?{
    bg:"#0a0805",bg2:"#0d0b07",card:"#141009",card2:"#1d1710",
    cream:"#f0e6d3",orange:"#E8520A",orangeL:"#FF6B2B",orangeD:"#bf4008",
    gold:"#C9A84C",goldL:"#dfc070",
    muted:"#6b5c48",text:"#c4b49e",
    nav:"rgba(10,8,5,.93)",border:"rgba(255,255,255,.07)",
    bHov:"rgba(232,82,10,.28)",div:"rgba(255,255,255,.055)",
    sh:"rgba(0,0,0,.65)",
  }:{
    bg:"#faf6ef",bg2:"#f2ece0",card:"#ffffff",card2:"#fef9f2",
    cream:"#18100a",orange:"#cc3800",orangeL:"#e04510",orangeD:"#a82e00",
    gold:"#8a5e00",goldL:"#b07a10",
    muted:"#8a7060",text:"#4a3828",
    nav:"rgba(250,246,239,.95)",border:"rgba(0,0,0,.09)",
    bHov:"rgba(204,56,0,.25)",div:"rgba(0,0,0,.07)",
    sh:"rgba(0,0,0,.14)",
  };
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SEARCH BAR â€” NLP powered
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function SearchBar({c,onSearch,onFilter}){
  const [q,setQ]=useState('');
  const [focus,setFocus]=useState(false);
  const QUICK=[
    {label:'ðŸ”¥ TendÃªncia',q:'premium'},
    {label:'âš¡ RÃ¡pido',q:'rÃ¡pido'},
    {label:'ðŸŒ¿ OrgÃ¢nico',q:'orgÃ¢nico natural'},
    {label:'ðŸŒ¶ Picante',q:'mexicano picante'},
    {label:'ðŸŸ JaponÃªs',q:'japonÃªs sushi'},
    {label:'ðŸ’¸ PromoÃ§Ã£o',q:'promoÃ§Ã£o desconto'},
  ];
  const handleChange=v=>{setQ(v);onSearch(v);};
  return h('div',{style:{padding:'0 28px',maxWidth:1200,margin:'0 auto',position:'relative',zIndex:10}},
    h('div',{className:'srch-wrap'},
      h('input',{className:'srch-input',type:'text',placeholder:'ðŸ”  Busque: "japonÃªs barato", "rÃ¡pido", "vegano perto"...',value:q,
        onChange:e=>handleChange(e.target.value),
        onFocus:()=>setFocus(true),onBlur:()=>setTimeout(()=>setFocus(false),200)
      }),
      h('span',{className:'srch-icon'},q?'âœ•':'')
    ),
    q&&h('div',{style:{position:'absolute',top:'100%',left:28,right:28,background:'rgba(20,16,9,.98)',border:'1px solid rgba(232,82,10,.2)',borderRadius:16,padding:'12px 16px',marginTop:8,backdropFilter:'blur(16px)',zIndex:100}},
      h('div',{style:{fontSize:10,color:'rgba(200,180,160,.5)',fontFamily:'Inter,sans-serif',letterSpacing:'.12em',textTransform:'uppercase',marginBottom:8}},'Buscando por: "'+q+'" via IA'),
      h('div',{style:{fontSize:12,color:'rgba(200,180,160,.7)',fontFamily:'Inter,sans-serif'}},'â†© Pressione Enter ou veja os resultados abaixo')
    ),
    h('div',{style:{display:'flex',flexWrap:'wrap',marginTop:12,gap:2}},
      ...QUICK.map((tag,i)=>h('button',{key:i,className:'srch-tag'+(q===tag.q?' active':''),onClick:()=>{handleChange(q===tag.q?'':tag.q);}},tag.label))
    )
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADMIN DASHBOARD â€” secret panel (logo Ã—5)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function AdminDashboard({c,open,onClose,dishes,restaurants}){
  const [tab,setTab]=useState('analytics');
  const [ratingAlerts]=useState(()=>RatingMonitor.check(restaurants));
  const [abResult]=useState(()=>AB.results('hero_cta'));
  const stats=Analytics.stats();
  const heatmap=LS.get('sab_heatmap',[]);

  // Calculate conversion per dish
  const dishStats=dishes.map(d=>({
    name:d.name,emoji:d.e,
    clicks:stats.dishes[d.name]||0,
    views:LS.get('sab_views_dish',{})[d.name]||0,
    ctr:Analytics.ctr(d.name),
  })).sort((a,b)=>b.clicks-a.clicks);

  const maxClicks=Math.max(1,...dishStats.map(d=>d.clicks));
  const totalClicks=stats.totalClicks;

  return h('div',{id:'admin',className:open?'open':'',onClick:e=>{if(e.target.id==='admin')onClose();}},
    h('div',{className:'adm-box'},
      h('button',{className:'adm-close',onClick:onClose},'Ã—'),
      h('div',{style:{marginBottom:28}},
        h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:26,fontWeight:900,color:'#f0e6d3',marginBottom:6,letterSpacing:'-1px'}},'âš¡ Painel Admin'),
        h('div',{style:{fontSize:11,color:'rgba(200,180,160,.5)',fontFamily:'Inter,sans-serif',letterSpacing:'.12em',textTransform:'uppercase'}},'acesso secreto Â· dados locais em tempo real')
      ),
      // Tabs
      h('div',{style:{display:'flex',gap:8,marginBottom:28,flexWrap:'wrap'}},
        ...['analytics','conversÃ£o','a/b test','avaliaÃ§Ãµes','heatmap','conteÃºdo'].map(t=>
          h('button',{key:t,className:'adm-tab'+(tab===t?' on':''),onClick:()=>setTab(t)},t.toUpperCase())
        )
      ),

      // â”€â”€ Tab: Analytics â”€â”€
      tab==='analytics'&&h('div',null,
        h('div',{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit,minmax(140px,1fr))',gap:14,marginBottom:28}},
          h('div',{className:'adm-kpi'},
            h('div',{style:{fontSize:28,fontWeight:900,fontFamily:"'Playfair Display',serif",color:'#E8520A'}},(totalClicks||0)),
            h('div',{style:{fontSize:10,color:'rgba(200,180,160,.5)',fontFamily:'Inter,sans-serif',textTransform:'uppercase',letterSpacing:'.1em',marginTop:4}},'Cliques totais')
          ),
          h('div',{className:'adm-kpi'},
            h('div',{style:{fontSize:28,fontWeight:900,fontFamily:"'Playfair Display',serif",color:'#C9A84C'}},(Object.keys(stats.dishes).length)),
            h('div',{style:{fontSize:10,color:'rgba(200,180,160,.5)',fontFamily:'Inter,sans-serif',textTransform:'uppercase',letterSpacing:'.1em',marginTop:4}},'Pratos clicados')
          ),
          h('div',{className:'adm-kpi'},
            h('div',{style:{fontSize:28,fontWeight:900,fontFamily:"'Playfair Display',serif",color:'#2ecc71'}},(heatmap.length)),
            h('div',{style:{fontSize:10,color:'rgba(200,180,160,.5)',fontFamily:'Inter,sans-serif',textTransform:'uppercase',letterSpacing:'.1em',marginTop:4}},'Pontos heatmap')
          ),
          h('div',{className:'adm-kpi'},
            h('div',{style:{fontSize:28,fontWeight:900,fontFamily:"'Playfair Display',serif",color:'#9b59b6'}},(abResult.variant)),
            h('div',{style:{fontSize:10,color:'rgba(200,180,160,.5)',fontFamily:'Inter,sans-serif',textTransform:'uppercase',letterSpacing:'.1em',marginTop:4}},'Variante A/B')
          )
        ),
        h('div',{style:{fontSize:13,color:'rgba(200,180,160,.6)',fontFamily:'Inter,sans-serif',marginBottom:16,fontWeight:500}},'Top pratos por cliques'),
        ...dishStats.map((d,i)=>h('div',{key:i,className:'adm-row'},
          h('div',{style:{display:'flex',alignItems:'center',gap:10}},
            h('span',{style:{fontSize:18}},d.emoji),
            h('span',{style:{color:'#f0e6d3',fontWeight:500}},d.name.slice(0,22)+(d.name.length>22?'...':'')),
          ),
          h('div',{style:{flex:1,margin:'0 16px'}},
            h('div',{className:'adm-bar-wrap'},h('div',{className:'adm-bar',style:{width:maxClicks?Math.round((d.clicks/maxClicks)*100)+'%':'0%'}}))
          ),
          h('div',{style:{color:'#C9A84C',fontWeight:600,minWidth:60,textAlign:'right'}},d.clicks+' cliques')
        ))
      ),

      // â”€â”€ Tab: ConversÃ£o â”€â”€
      tab==='conversÃ£o'&&h('div',null,
        h('div',{style:{fontSize:12,color:'rgba(200,180,160,.5)',fontFamily:'Inter,sans-serif',marginBottom:20,letterSpacing:'.05em'}},'CTR = cliques iFood Ã· visualizaÃ§Ãµes do card'),
        ...dishStats.map((d,i)=>h('div',{key:i,style:{display:'flex',alignItems:'center',justifyContent:'space-between',padding:'12px 0',borderBottom:'1px solid rgba(255,255,255,.05)',fontFamily:'Inter,sans-serif',fontSize:12}},
          h('div',{style:{display:'flex',alignItems:'center',gap:10}},
            h('span',null,d.emoji),
            h('span',{style:{color:'#f0e6d3'}},(d.name.slice(0,28)))
          ),
          h('div',{style:{display:'flex',gap:16,alignItems:'center'}},
            h('span',{style:{color:'rgba(200,180,160,.5)'}},'ðŸ‘ '+(d.views||0)),
            h('span',{style:{color:'#E8520A'}},d.clicks+' clicks'),
            h('span',{className:'adm-badge',style:{background:parseFloat(d.ctr)>5?'rgba(46,204,113,.15)':'rgba(232,82,10,.15)',color:parseFloat(d.ctr)>5?'#2ecc71':'#E8520A'}},'CTR '+d.ctr)
          )
        ))
      ),

      // â”€â”€ Tab: A/B Test â”€â”€
      tab==='a/b test'&&h('div',null,
        h('div',{style:{background:'rgba(255,255,255,.03)',border:'1px solid rgba(255,255,255,.07)',borderRadius:16,padding:24,marginBottom:20}},
          h('div',{style:{fontSize:14,color:'#f0e6d3',fontFamily:'Inter,sans-serif',fontWeight:600,marginBottom:12}},'Teste: Hero CTA Button'),
          h('div',{style:{fontSize:12,color:'rgba(200,180,160,.6)',fontFamily:'Inter,sans-serif',marginBottom:16}},'Variante atribuÃ­da a este usuÃ¡rio: ',h('strong',{style:{color:'#C9A84C'}},abResult.variant)),
          ...[['A','ðŸ½ Explorar Pratos'],['B','ðŸ”¥ Ver os Melhores'],['C','ðŸ• Pedir Agora']].map(([v,txt])=>
            h('div',{key:v,style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'10px 0',borderBottom:'1px solid rgba(255,255,255,.05)',fontFamily:'Inter,sans-serif',fontSize:12}},
              h('span',{style:{color:abResult.variant===v?'#E8520A':'rgba(200,180,160,.5)',fontWeight:abResult.variant===v?700:400}},'Variante '+v+': '+txt),
              h('span',{style:{color:'#C9A84C',fontWeight:600}},((abResult.conversions||{})[v]||0)+' conv.')
            )
          )
        ),
        h('div',{style:{background:'rgba(255,255,255,.03)',border:'1px solid rgba(255,255,255,.07)',borderRadius:16,padding:24}},
          h('div',{style:{fontSize:14,color:'#f0e6d3',fontFamily:'Inter,sans-serif',fontWeight:600,marginBottom:8}},'Como funciona'),
          h('div',{style:{fontSize:12,color:'rgba(200,180,160,.5)',fontFamily:'Inter,sans-serif',lineHeight:1.8}},'Cada usuÃ¡rio recebe uma variante aleatÃ³ria e persistente (localStorage). O sistema rastreia qual variante gera mais cliques no iFood. ApÃ³s 100 conversÃµes por variante, a vencedora Ã© declarada automaticamente.')
        )
      ),

      // â”€â”€ Tab: AvaliaÃ§Ãµes â”€â”€
      tab==='avaliaÃ§Ãµes'&&h('div',null,
        ratingAlerts.length>0&&h('div',{style:{marginBottom:16}},
          ratingAlerts.map((a,i)=>h('div',{key:i,className:'rating-alert'},'âš ï¸ '+a.name+' com avaliaÃ§Ã£o '+a.rating+' â€” abaixo do limiar 4.5'))
        ),
        ...restaurants.map((r,i)=>{
          const stored=parseFloat(LS.get('sab_rating_'+r.name,r.rating));
          const current=parseFloat(r.rating);
          const ok=current>=4.5;
          return h('div',{key:i,className:'adm-row'},
            h('div',{style:{display:'flex',alignItems:'center',gap:10}},
              h('span',null,r.icon),h('span',{style:{color:'#f0e6d3',fontWeight:500}},r.name)
            ),
            h('div',{style:{flex:1,margin:'0 12px'}},h('div',{className:'adm-bar-wrap'},h('div',{className:'adm-bar',style:{width:((current/5)*100)+'%',background:ok?'linear-gradient(90deg,#2ecc71,#27ae60)':'linear-gradient(90deg,#e74c3c,#c0392b)'}}))),
            h('div',{style:{display:'flex',gap:10,alignItems:'center'}},
              h('span',{style:{color:ok?'#2ecc71':'#e74c3c',fontWeight:700,fontFamily:'Inter,sans-serif',fontSize:13}},current+' â­'),
              h('span',{className:'adm-badge',style:{background:ok?'rgba(46,204,113,.15)':'rgba(231,76,60,.15)',color:ok?'#2ecc71':'#e74c3c'}},ok?'OK':'ALERTAR')
            )
          );
        })
      ),

      // â”€â”€ Tab: Heatmap â”€â”€
      tab==='heatmap'&&h('div',null,
        h('div',{style:{fontFamily:'Inter,sans-serif',fontSize:12,color:'rgba(200,180,160,.6)',marginBottom:16}},heatmap.length+' pontos gravados nesta sessÃ£o. Ative o modo heatmap para visualizar cliques em tempo real.'),
        h('div',{style:{position:'relative',background:'rgba(255,255,255,.02)',border:'1px solid rgba(255,255,255,.06)',borderRadius:12,height:280,overflow:'hidden'}},
          h('div',{style:{position:'absolute',inset:0,display:'flex',alignItems:'center',justifyContent:'center',color:'rgba(200,180,160,.3)',fontFamily:'Inter,sans-serif',fontSize:12,letterSpacing:'.1em',textTransform:'uppercase'}},'Mapa de calor da pÃ¡gina'),
          ...heatmap.slice(-80).map((p,i)=>h('div',{key:i,style:{position:'absolute',left:p.x+'%',top:Math.min(p.y,95)+'%',width:8,height:8,borderRadius:'50%',background:'rgba(232,82,10,.6)',transform:'translate(-50%,-50%)',boxShadow:'0 0 12px rgba(232,82,10,.4)'}}))
        ),
        h('button',{className:'adm-btn',style:{marginTop:16},onClick:()=>{LS.set('sab_heatmap',[]);Toast.show('ðŸ—‘ Heatmap limpo!');}},'Limpar dados')
      ),

      // â”€â”€ Tab: ConteÃºdo â”€â”€
      tab==='conteÃºdo'&&h('div',null,
        h('div',{style:{fontSize:12,color:'rgba(200,180,160,.5)',fontFamily:'Inter,sans-serif',marginBottom:20,lineHeight:1.7}},'Edite os pratos em destaque diretamente. AlteraÃ§Ãµes ficam salvas localmente e sÃ£o aplicadas imediatamente.'),
        h('div',{style:{background:'rgba(255,255,255,.03)',border:'1px solid rgba(255,255,255,.07)',borderRadius:16,padding:24}},
          h('div',{style:{fontSize:13,color:'#f0e6d3',fontFamily:'Inter,sans-serif',fontWeight:600,marginBottom:14}},'Prato do Dia (override)'),
          h('input',{className:'adm-input',placeholder:'Ex: Pizza Margherita Trufada',defaultValue:LS.get('sab_daily_override','')}),
          h('div',{style:{fontSize:13,color:'#f0e6d3',fontFamily:'Inter,sans-serif',fontWeight:600,marginBottom:14,marginTop:8}},'Banner promoÃ§Ã£o'),
          h('input',{className:'adm-input',placeholder:'Texto do banner de promoÃ§Ã£o...',defaultValue:LS.get('sab_banner_text','')},),
          h('button',{className:'adm-btn',onClick:()=>{Toast.show('âœ… ConteÃºdo atualizado!');}}, 'Salvar alteraÃ§Ãµes')
        )
      )
    )
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NOTIFICATION STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function NotifStrip(){
  const [show,setShow]=useState(false);
  const [msg,setMsg]=useState('');
  const msgs=[
    'ðŸ• Bella Napoli: Pizza do dia com 20% OFF atÃ© Ã s 18h!',
    'â­ Sakura House acaba de receber 50 avaliaÃ§Ãµes 5 estrelas!',
    'ðŸ›µ Tempo mÃ©dio de entrega hoje: apenas 14 minutos!',
    'ðŸ”¥ Smash Wagyu Double Ã© o prato mais pedido agora!',
  ];
  useEffect(()=>{
    let i=0;
    const show=()=>{setMsg(msgs[i%msgs.length]);setShow(true);setTimeout(()=>{setShow(false);i++;setTimeout(show,8000);},5000);};
    const t=setTimeout(show,12000);
    return()=>clearTimeout(t);
  },[]);
  return h('div',{id:'notif-strip',className:show?'show':''},
    h('div',{className:'notif-inner'},
      h('span',{style:{flex:1,textAlign:'center',fontWeight:500}},msg),
      h('button',{onClick:()=>setShow(false),style:{background:'none',border:'none',color:'rgba(180,255,180,.6)',cursor:'pointer',fontSize:18,flexShrink:0,fontFamily:'Inter,sans-serif'}},'Ã—')
    )
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIDE EFFECTS (cursor, progress, tilt)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function bootCursor(){
  const dot=document.getElementById('cur'),ring=document.getElementById('cur-r'),em=document.getElementById('cur-emoji');
  if(!dot||!ring||window.innerWidth<=768)return;
  let mx=0,my=0,rx=0,ry=0,raf;
  const EMOJIS={food:'ðŸ´',drink:'ðŸ¥‚',chat:'ðŸ’¬'};
  const move=e=>{
    mx=e.clientX;my=e.clientY;
    dot.style.left=mx+'px';dot.style.top=my+'px';
    if(em){em.style.left=mx+'px';em.style.top=my+'px';}
  };
  document.addEventListener('mousemove',move,{passive:true});
  const loop=()=>{rx+=(mx-rx)*.14;ry+=(my-ry)*.14;ring.style.left=rx+'px';ring.style.top=ry+'px';raf=requestAnimationFrame(loop);};
  loop();
  // Smart cursor type detection
  const setCursor=type=>{
    document.body.classList.remove('c-food','c-drink','c-chat','ch');
    if(type){document.body.classList.add('c-'+type);if(em)em.textContent=EMOJIS[type]||'';}
    else if(em)em.textContent='';
  };
  // Attach to all interactive elements
  document.addEventListener('mouseover',e=>{
    const el=e.target.closest('[data-cursor]');
    if(el){setCursor(el.dataset.cursor);return;}
    const link=e.target.closest('a,button,[data-h]');
    if(link){document.body.classList.add('ch');}
    else{document.body.classList.remove('ch');}
  });
  document.addEventListener('mouseout',e=>{
    if(!e.relatedTarget||e.relatedTarget===document.body){setCursor(null);document.body.classList.remove('ch');}
  });
  return()=>{document.removeEventListener('mousemove',move);cancelAnimationFrame(raf);};
}

function bootProgress(){
  const bar=document.getElementById('prog');
  if(!bar)return;
  const fn=()=>{
    const pct=(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight))*100;
    bar.style.width=Math.min(pct,100)+'%';
  };
  window.addEventListener('scroll',fn,{passive:true});
  return()=>window.removeEventListener('scroll',fn);
}

function applyTilt(el,e){
  const r=el.getBoundingClientRect();
  // Normalized -0.5 to 0.5 position within card
  const nx=(e.clientX-r.left)/r.width-.5;
  const ny=(e.clientY-r.top)/r.height-.5;
  // Magnetic pull: card tilts TOWARD cursor (positive = toward)
  const rotX=ny*-18;   // tilt up when cursor at bottom
  const rotY=nx*18;    // tilt right when cursor at right
  // Translate slightly toward cursor for 3D depth illusion
  const tx=nx*8;
  const ty=ny*8;
  el.style.transform=`perspective(800px) rotateX(${rotX}deg) rotateY(${rotY}deg) translate(${tx}px,${ty}px) scale(1.03)`;
  // Dynamic highlight based on cursor position
  const light=`radial-gradient(circle at ${(nx+.5)*100}% ${(ny+.5)*100}%, rgba(255,255,255,.08) 0%, transparent 65%)`;
  let shine=el.querySelector('.mag-shine');
  if(!shine){shine=document.createElement('div');shine.className='mag-shine';shine.style.cssText='position:absolute;inset:0;border-radius:inherit;pointer-events:none;z-index:10;transition:background .1s';el.style.position='relative';el.appendChild(shine);}
  shine.style.background=light;
}
function resetTilt(el){
  el.style.transform='perspective(800px) rotateX(0) rotateY(0) translate(0,0) scale(1)';
  const shine=el.querySelector('.mag-shine');
  if(shine)shine.style.background='none';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ISOLATED COMPONENTS (no App re-renders)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ Loader â”€â”€ */
function Loader({onDone}){
  useEffect(()=>{const t=setTimeout(onDone,2300);return()=>clearTimeout(t);},[]);
  return null;
}

/* â”€â”€ Typing effect â”€â”€ */
function TypeWriter({color}){
  const [txt,setTxt]=useState('');
  useEffect(()=>{
    const words=['uma obra de arte.','uma histÃ³ria perfeita.','emoÃ§Ã£o pura.','vÃ­cio em forma de prato.'];
    let wi=0,ci=0,del=false;
    const tick=()=>{
      const w=words[wi];
      if(!del){ci++;setTxt(w.slice(0,ci));if(ci===w.length){del=true;setTimeout(tick,2500);return;}}
      else{ci--;setTxt(w.slice(0,ci));if(ci===0){del=false;wi=(wi+1)%words.length;setTimeout(tick,500);return;}}
      setTimeout(tick,del?45:75);
    };
    const t=setTimeout(tick,900);
    return()=>clearTimeout(t);
  },[]);
  return h('span',{style:{borderRight:`2px solid ${color}`,paddingRight:4,animation:'blink .8s step-end infinite',fontStyle:'italic',color}},txt);
}

/* â”€â”€ Leaves â”€â”€ */
function Leaves(){
  const [ls,setLs]=useState([]);
  useEffect(()=>{
    const em=['ðŸƒ','ðŸŒ¿','ðŸ‚','ðŸŒ¾'];
    const id=setInterval(()=>setLs(p=>[...p.slice(-6),{id:Date.now(),x:Math.random()*95,d:5+Math.random()*5,e:em[0|Math.random()*4]}]),4200);
    return()=>clearInterval(id);
  },[]);
  return h(Fragment,null,...ls.map(l=>h('div',{key:l.id,style:{position:'fixed',top:'-6%',left:l.x+'%',zIndex:8000,pointerEvents:'none',fontSize:15,animation:`fallLeaf ${l.d}s linear forwards`,opacity:.65}},l.e)));
}

/* â”€â”€ Animated Counter â”€â”€ */
function Counter({target,suffix}){
  const [v,setV]=useState(0);
  const ref=useRef(null);
  const done=useRef(false);
  useEffect(()=>{
    const el=ref.current;if(!el)return;
    const obs=new IntersectionObserver(([e])=>{
      if(e.isIntersecting&&!done.current){
        done.current=true;obs.unobserve(el);
        const t0=performance.now();
        const dur=1800;
        const step=t=>{
          const p=Math.min((t-t0)/dur,1);
          setV(Math.round((1-Math.pow(1-p,4))*target));
          if(p<1)requestAnimationFrame(step);
        };
        requestAnimationFrame(step);
      }
    },{threshold:.5});
    obs.observe(el);return()=>obs.disconnect();
  },[target]);
  return h('span',{ref},v.toLocaleString('pt-BR')+suffix);
}

/* â”€â”€ Reveal â”€â”€ */
function Rv({children,delay=0,dir='up',style={},cls=''}){
  const ref=useRef(null);const[v,setV]=useState(false);
  useEffect(()=>{
    const el=ref.current;if(!el)return;
    const o=new IntersectionObserver(([e])=>{if(e.isIntersecting){setV(true);o.unobserve(el);}},{threshold:.06});
    o.observe(el);return()=>o.disconnect();
  },[]);
  const from={up:'translateY(44px)',left:'translateX(-44px)',right:'translateX(44px)',zoom:'scale(.93)'}[dir]||'translateY(44px)';
  return h('div',{ref,className:cls,style:{opacity:v?1:0,transform:v?'none':from,transition:`opacity .85s ${delay}s cubic-bezier(.22,1,.36,1),transform .85s ${delay}s cubic-bezier(.22,1,.36,1)`,...style}},children);
}

/* â”€â”€ Section Header â”€â”€ */
function SH({label,title,accent,c,center=false}){
  return h('div',{style:{textAlign:center?'center':'left',marginBottom:52}},
    h('div',{style:{display:'inline-flex',alignItems:'center',gap:10,background:'rgba(232,82,10,.09)',border:'1px solid rgba(232,82,10,.22)',padding:'6px 16px',borderRadius:100,marginBottom:22}},
      h('span',{style:{width:5,height:5,background:c.orange,borderRadius:'50%',display:'inline-block',animation:'pulse 2s infinite'}}),
      h('span',{style:{fontSize:10,letterSpacing:'.18em',textTransform:'uppercase',color:c.orangeL,fontFamily:'Inter,sans-serif',fontWeight:600}},label)
    ),
    h('h2',{style:{fontFamily:"'Playfair Display',serif",fontSize:'clamp(30px,5vw,56px)',fontWeight:900,color:c.cream,lineHeight:1.02,letterSpacing:'-1.5px'}},
      title+' ',h('em',{style:{color:c.orange}},accent)
    )
  );
}

/* â”€â”€ Drink Slider (FULLY ISOLATED) â”€â”€ */
function DrinkSlider({c}){
  const [a,setA]=useState(0);
  const ref=useRef(null);const tmr=useRef(null);

  function go(i){
    setA(i);
    const el=ref.current;if(!el)return;
    const sl=el.querySelectorAll('[data-s]');
    if(!sl[i])return;
    const s=sl[i];
    el.scrollTo({left:s.offsetLeft-(el.clientWidth/2)+(s.offsetWidth/2),behavior:'smooth'});
  }

  useEffect(()=>{
    const el=ref.current;if(!el)return;
    const fn=()=>{
      clearTimeout(tmr.current);
      tmr.current=setTimeout(()=>{
        const sl=el.querySelectorAll('[data-s]');
        const cx=el.scrollLeft+el.clientWidth/2;
        let best=0,bd=Infinity;
        sl.forEach((s,i)=>{const d=Math.abs(s.offsetLeft+s.offsetWidth/2-cx);if(d<bd){bd=d;best=i;}});
        setA(best);
      },90);
    };
    el.addEventListener('scroll',fn,{passive:true});
    return()=>{el.removeEventListener('scroll',fn);clearTimeout(tmr.current);};
  },[]);

  return h('section',{id:'bebidas',style:{padding:'100px 0 0',background:'linear-gradient(180deg,#050d08 0%,#0a1a0d 55%,#070e08 100%)',textAlign:'center',position:'relative'}},
    // bubbles
    h('div',{style:{position:'absolute',inset:0,overflow:'hidden',pointerEvents:'none'}},
      ...[...Array(12)].map((_,i)=>h('div',{key:i,style:{position:'absolute',bottom:-30,left:(2+i*8)+'%',width:5+i*3,height:5+i*3,borderRadius:'50%',background:'rgba(255,255,255,.06)',animation:`riseUp ${6+i*1.1}s ${i*.65}s linear infinite`}}))
    ),
    h(Rv,{style:{padding:'0 24px',marginBottom:44,position:'relative',zIndex:2}},
      h(SH,{label:'Refresque-se',title:'Nossas',accent:'bebidas',c,center:true})
    ),
    // slider
    h('div',{'data-cursor':'drink',ref,className:'ns',style:{display:'flex',gap:22,overflowX:'auto',scrollSnapType:'x mandatory',paddingLeft:'calc(50% - 148px)',paddingRight:'calc(50% - 148px)',paddingTop:12,paddingBottom:12,alignItems:'center',WebkitOverflowScrolling:'touch',position:'relative',zIndex:1}},
      ...DRINKS.map((dr,i)=>{
        const on=a===i;
        return h('div',{key:i,'data-s':i,onClick:()=>go(i),style:{flexShrink:0,width:292,height:460,background:on?dr.bg:'rgba(255,255,255,.03)',backdropFilter:'blur(24px)',WebkitBackdropFilter:'blur(24px)',border:on?'1.5px solid rgba(255,255,255,.42)':'1px solid rgba(255,255,255,.07)',borderRadius:40,padding:'32px 24px 28px',scrollSnapAlign:'center',transition:'all .55s cubic-bezier(.22,1,.36,1)',opacity:on?1:.32,transform:on?'scale(1.05)':'scale(.82)',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'space-between',boxShadow:on?'0 36px 72px rgba(0,0,0,.65),0 0 60px rgba(255,255,255,.04)':'none',cursor:'pointer',position:'relative',color:'#fff',userSelect:'none'}},
          h('div',{style:{position:'absolute',top:18,right:18,fontSize:9,fontWeight:700,padding:'4px 12px',borderRadius:20,background:'rgba(255,255,255,.18)',backdropFilter:'blur(8px)',letterSpacing:'.05em',fontFamily:'Inter,sans-serif'}},dr.badge),
          h('div',{style:{fontSize:74,lineHeight:1,transition:'transform .55s cubic-bezier(.22,1,.36,1)',transform:on?'translateY(-14px) rotate(9deg) scale(1.12)':'none'}},dr.e),
          h('div',{style:{textAlign:'center',width:'100%'}},
            h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:20,fontWeight:700,marginBottom:7,lineHeight:1.2}},dr.name),
            h('div',{style:{fontSize:11,opacity:.78,lineHeight:1.65,marginBottom:9,fontFamily:'Inter,sans-serif',fontWeight:300}},dr.desc),
            h('div',{style:{fontSize:10,fontFamily:'Inter,sans-serif',marginBottom:9,opacity:on?.72:0,transition:'opacity .4s',letterSpacing:'.04em'}},'ðŸ”¥ '+dr.kcal+' Â· â± '+dr.time),
            h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:28,fontWeight:900,letterSpacing:'-1px'}},'R$ '+dr.price)
          ),
          h('a',{href:iurl('bebida+'+dr.name.replace(/\s+/g,'+')),target:'_blank',rel:'noreferrer',onClick:e=>e.stopPropagation(),style:{background:on?'linear-gradient(135deg,#E8520A,#C9A84C)':'transparent',color:'#fff',padding:'11px 28px',borderRadius:100,fontSize:12,fontWeight:700,textDecoration:'none',fontFamily:'Inter,sans-serif',whiteSpace:'nowrap',opacity:on?1:0,transform:on?'translateY(0)':'translateY(10px)',transition:'opacity .4s,transform .4s',pointerEvents:on?'auto':'none',letterSpacing:'.05em'}},'Pedir no iFood â†’')
        );
      })
    ),
    // dots
    h('div',{style:{display:'flex',justifyContent:'center',gap:8,padding:'24px 0 34px',position:'relative',zIndex:2}},
      ...DRINKS.map((_,i)=>h('button',{key:i,onClick:()=>go(i),style:{width:a===i?28:7,height:7,borderRadius:100,background:a===i?'#fff':'rgba(255,255,255,.22)',border:'none',cursor:'pointer',transition:'all .4s',padding:0,flexShrink:0}}))
    ),
    // wave
    h('div',{style:{lineHeight:0,position:'relative',zIndex:1}},
      h('svg',{viewBox:'0 0 1440 72',preserveAspectRatio:'none',style:{display:'block',width:'100%',height:72}},
        h('path',{d:'M0,36 C240,72 480,0 720,36 C960,72 1200,0 1440,36 L1440,72 L0,72 Z',fill:c.bg})
      )
    )
  );
}




/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SABOR DO MOMENTO â€” time-aware section
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const MOMENTOS={
  manha:{
    start:5,end:11,
    label:'Bom dia, SÃ£o Paulo',
    period:'Sabores do',accent:'amanhecer',
    sub:'Comece o dia com energia e sabor. Selecionamos o melhor da manhÃ£ para vocÃª.',
    bg:'linear-gradient(135deg,#0d1a0a 0%,#1a2d10 40%,#0a1208 100%)',
    accent_color:'#7ec850',
    live_bg:'rgba(126,200,80,.12)',live_color:'#7ec850',
    dish:{e:'ðŸ¥—',name:'Bowl AmazÃ´nico Premium',from:'RaÃ­zes do Norte',q:'bowl+acai+organico'},
    icon:'ðŸŒ…',
  },
  almoco:{
    start:11,end:15,
    label:'Hora do almoÃ§o',
    period:'O melhor',accent:'do meio-dia',
    sub:'Pause, respire e se presenteie. O almoÃ§o que vocÃª merece estÃ¡ a um clique.',
    bg:'linear-gradient(135deg,#1a0d04 0%,#2d1a08 40%,#120a04 100%)',
    accent_color:'#E8520A',
    live_bg:'rgba(232,82,10,.12)',live_color:'#E8520A',
    dish:{e:'ðŸ',name:'Pasta Mia Signature',from:'Pasta Mia',q:'massa+fresca+italiana'},
    icon:'â˜€ï¸',
  },
  happyhour:{
    start:15,end:19,
    label:'Happy Hour chegou',
    period:'Golden',accent:'hour',
    sub:'O momento perfeito entre o trabalho e a noite. Sabores que celebram o fim do dia.',
    bg:'linear-gradient(135deg,#1a1204 0%,#2d2008 40%,#120e04 100%)',
    accent_color:'#C9A84C',
    live_bg:'rgba(201,168,76,.12)',live_color:'#C9A84C',
    dish:{e:'ðŸŒ®',name:'Trio Tacos Signature',from:'El Rancho',q:'tacos+birria+signature'},
    icon:'ðŸ¥‚',
  },
  jantar:{
    start:19,end:23,
    label:'Noite perfeita',
    period:'O jantar',accent:'dos sonhos',
    sub:'A noite foi feita para experiÃªncias inesquecÃ­veis. Escolha algo que vocÃª vai lembrar.',
    bg:'linear-gradient(135deg,#0a0508 0%,#180a12 40%,#08040a 100%)',
    accent_color:'#9b59b6',
    live_bg:'rgba(155,89,182,.12)',live_color:'#c39bd3',
    dish:{e:'ðŸ±',name:'Omakase do Chef',from:'Sakura House',q:'omakase+sushi+premium'},
    icon:'ðŸŒ™',
  },
  madrugada:{
    start:23,end:5,
    label:'Ainda acordado?',
    period:'Sabores da',accent:'madrugada',
    sub:'Porque a fome nÃ£o tem horÃ¡rio. Para os corajosos que ainda estÃ£o de pÃ©.',
    bg:'linear-gradient(135deg,#04060a 0%,#080a14 40%,#040608 100%)',
    accent_color:'#5dade2',
    live_bg:'rgba(93,173,226,.1)',live_color:'#5dade2',
    dish:{e:'ðŸ”',name:'Smash Wagyu Double',from:'Crush Burger',q:'smash+wagyu+burger'},
    icon:'â­',
  },
};

function getMomento(){
  const h=new Date().getHours();
  if(h>=5&&h<11)return MOMENTOS.manha;
  if(h>=11&&h<15)return MOMENTOS.almoco;
  if(h>=15&&h<19)return MOMENTOS.happyhour;
  if(h>=19&&h<23)return MOMENTOS.jantar;
  return MOMENTOS.madrugada;
}

function LiveClock(){
  const [time,setTime]=useState(()=>new Date());
  useEffect(()=>{const id=setInterval(()=>setTime(new Date()),1000);return()=>clearInterval(id);},[]);
  const hh=String(time.getHours()).padStart(2,'0');
  const mm=String(time.getMinutes()).padStart(2,'0');
  const ss=String(time.getSeconds()).padStart(2,'0');
  return h('div',{className:'momento-time-wrap'},
    h('span',{className:'momento-time-display'},hh),
    h('span',{className:'momento-time-display momento-time-colon'},':'),
    h('span',{className:'momento-time-display'},mm),
    h('span',{className:'momento-time-display momento-time-colon',style:{fontSize:28,alignSelf:'flex-end',marginBottom:8}},':'),
    h('span',{className:'momento-time-display',style:{fontSize:28,alignSelf:'flex-end',marginBottom:8}},ss)
  );
}

function MomentoSection({c}){
  const [m,setM]=useState(getMomento);
  // Recheck every minute
  useEffect(()=>{
    const id=setInterval(()=>setM(getMomento()),60000);
    return()=>clearInterval(id);
  },[]);

  return h('section',{className:'momento-section',style:{
    padding:'80px 28px',
    background:m.bg,
    borderTop:`1px solid rgba(255,255,255,.06)`,
  }},
    // Giant ghost clock
    h('div',{className:'momento-clock',style:{color:m.accent_color}},
      new Date().getHours()+':'+String(new Date().getMinutes()).padStart(2,'0')
    ),
    h('div',{style:{maxWidth:1100,margin:'0 auto',display:'grid',gridTemplateColumns:'1fr 1fr',gap:56,alignItems:'center'},className:'hero-grid'},
      // Left: text
      h('div',null,
        h('div',{className:'momento-live',style:{background:m.live_bg,color:m.live_color,borderColor:'rgba(255,255,255,.08)',border:'1px solid rgba(255,255,255,.08)'}},
          h('span',{style:{background:m.live_color,width:6,height:6,borderRadius:'50%',display:'inline-block',animation:'pulse 1.5s infinite'}}),
          m.label
        ),
        h(LiveClock),
        h('div',{className:'momento-period',style:{color:'#f0e6d3'}},
          m.period,' ',h('em',{style:{color:m.accent_color,fontStyle:'italic'}},m.accent)
        ),
        h('div',{className:'momento-sub',style:{color:'rgba(240,230,211,.65)'}},m.sub)
      ),
      // Right: dish card
      h(Rv,{dir:'right'},
        h('a',{'data-h':1,'data-cursor':'food',href:iurl(m.dish.q),target:'_blank',rel:'noreferrer',
          className:'momento-card',
          style:{background:'rgba(255,255,255,.05)',boxShadow:`0 24px 64px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.08) inset`}},
          h('div',{className:'momento-card-emoji'},m.dish.e),
          h('div',null,
            h('div',{className:'momento-tag',style:{color:m.accent_color}},m.icon+' '+m.label),
            h('div',{className:'momento-dish',style:{color:'#f0e6d3'}},m.dish.name),
            h('div',{className:'momento-rest'},m.dish.from),
            h('span',{className:'momento-cta',style:{
              background:`linear-gradient(135deg,${m.accent_color},${m.accent_color}cc)`,
              color:'#fff',
              boxShadow:`0 6px 20px ${m.accent_color}44`
            }},'Pedir agora ','â†’')
          )
        )
      )
    )
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHEF IA â€” powered by Claude API
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const MENU_CONTEXT=DISHES.map(d=>`${d.e} ${d.name} (${d.from}) - R$${d.price}, ${d.time}min, frete ${d.frete}, ${d.stars}â­ - ${d.desc}`).join('\n');
const DRINKS_CONTEXT=DRINKS.map(d=>`${d.e} ${d.name} - R$${d.price}, ${d.kcal} - ${d.desc}`).join('\n');
const CHEF_SYSTEM=`VocÃª Ã© o Chef RenÃ©, sommelier e maÃ®tre gastronÃ´mico do Sabores, a vitrine gastronÃ´mica mais sofisticada do Brasil. VocÃª tem personalidade refinada, calorosa e apaixonada por gastronomia. Use linguagem elegante mas acessÃ­vel. Sempre sugira pratos especÃ­ficos do cardÃ¡pio abaixo.

CARDÃPIO ATUAL:
${MENU_CONTEXT}

BEBIDAS:
${DRINKS_CONTEXT}

Regras:
- Sempre mencione nome do prato, restaurante e preÃ§o nas sugestÃµes
- Pergunte sobre restriÃ§Ãµes alimentares quando relevante
- Sugira harmonizaÃ§Ãµes de bebidas
- MÃ¡ximo 3 sugestÃµes por resposta
- Seja conciso (mÃ¡x 150 palavras)
- Use emojis com moderaÃ§Ã£o
- Nunca invente pratos fora do cardÃ¡pio acima`;

function ChefChat(){
  const [open,setOpen]=useState(false);
  const [msgs,setMsgs]=useState([
    {role:'ai',text:'OlÃ¡! Sou o Chef RenÃ© ðŸ‘¨â€ðŸ³ Posso ajudÃ¡-lo a escolher o prato perfeito para este momento. O que estÃ¡ desejando hoje?'}
  ]);
  const [input,setInput]=useState('');
  const [loading,setLoading]=useState(false);
  const msgsRef=useRef(null);
  const inputRef=useRef(null);

  const CHIPS=['Estou com fome agora ðŸ”¥','Algo leve e saudÃ¡vel ðŸ¥—','JaponÃªs premium ðŸ±','Surpreenda-me ðŸŽ²','Sem glÃºten ðŸŒ¾','Para dois ðŸ’‘'];

  useEffect(()=>{
    if(msgsRef.current)msgsRef.current.scrollTop=msgsRef.current.scrollHeight;
  },[msgs,loading]);

  const send=async(text)=>{
    const q=(text||input).trim();
    if(!q||loading)return;
    setInput('');
    setMsgs(m=>[...m,{role:'user',text:q}]);
    setLoading(true);

    // Build history for context
    const history=msgs.filter(m=>m.role!=='ai'||msgs.indexOf(m)>0).map(m=>({
      role:m.role==='ai'?'assistant':'user',
      content:m.text
    }));

    try{
      const res=await fetch('https://api.anthropic.com/v1/messages',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({
          model:'claude-sonnet-4-20250514',
          max_tokens:400,
          system:CHEF_SYSTEM,
          messages:[...history,{role:'user',content:q}]
        })
      });
      const data=await res.json();
      const reply=data.content?.[0]?.text||'Desculpe, nÃ£o consegui responder. Tente novamente.';
      setMsgs(m=>[...m,{role:'ai',text:reply}]);
    }catch(e){
      setMsgs(m=>[...m,{role:'ai',text:'Desculpe, houve um problema de conexÃ£o. Tente novamente em instantes.'}]);
    }
    setLoading(false);
    setTimeout(()=>inputRef.current?.focus(),100);
  };

  const handleKey=e=>{
    if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();send();}
  };

  return h(Fragment,null,
    // Floating button
    h('button',{id:'chef-btn','data-cursor':'chat',onClick:()=>{setOpen(o=>!o);},title:'Pergunte ao Chef RenÃ©'},
      open?'âœ•':'ðŸ‘¨â€ðŸ³',
      !open&&h('span',{className:'chef-pulse'})
    ),
    // Panel
    h('div',{id:'chef-panel',className:open?'open':''},
      // Header
      h('div',{className:'chef-head'},
        h('div',{className:'chef-avatar'},'ðŸ‘¨â€ðŸ³'),
        h('div',null,
          h('div',{className:'chef-title'},'Chef RenÃ©'),
          h('div',{className:'chef-sub'},'Sommelier IA Â· Online agora')
        ),
        h('button',{className:'chef-close',onClick:()=>setOpen(false)},'Ã—')
      ),
      // Quick chips
      h('div',{className:'chef-chips'},
        ...CHIPS.map((chip,i)=>h('button',{key:i,className:'chef-chip',onClick:()=>{if(!loading)send(chip);}},chip))
      ),
      // Messages
      h('div',{ref:msgsRef,className:'chef-msgs'},
        ...msgs.map((m,i)=>h('div',{key:i,className:'chef-msg '+m.role},
          h('div',{className:'chef-bubble'},m.text)
        )),
        loading&&h('div',{className:'chef-msg ai'},
          h('div',{className:'chef-bubble chef-typing'},
            h('span'),h('span'),h('span')
          )
        )
      ),
      // Input
      h('div',{className:'chef-footer'},
        h('textarea',{ref:inputRef,className:'chef-input',placeholder:'Ex: quero algo japonÃªs e leve...',value:input,
          onChange:e=>setInput(e.target.value),onKeyDown:handleKey,rows:1}),
        h('button',{className:'chef-send',disabled:loading||!input.trim(),onClick:()=>send()},'â†‘')
      )
    )
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NETFLIX ROW COMPONENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function NetflixRow({title,accent,label,dishes,c,favs,setFavs,dailyTop,offset=0}){
  const trackRef=useRef(null);
  const scroll=dir=>{
    const el=trackRef.current;if(!el)return;
    el.scrollBy({left:dir*800,behavior:'smooth'});
  };
  return h('div',{className:'nfx-row'},
    h('div',{className:'nfx-row-header'},
      h('div',{className:'nfx-row-title'},title,' ',h('em',null,accent)),
      h('a',{href:'#',className:'nfx-row-seeall',onClick:e=>e.preventDefault()},label+' â†’')
    ),
    h('div',{className:'nfx-row-wrap',style:{position:'relative'}},
      h('button',{className:'nfx-arrow nfx-arrow-l',onClick:()=>scroll(-1)},'â€¹'),
      h('div',{ref:trackRef,className:'nfx-track'},
        ...dishes.map((d,i)=>{
          const idx=offset+i;
          return h('a',{key:d.name,'data-cursor':'food','data-h':1,
            href:iurl(d.q),target:'_blank',rel:'noreferrer',className:'nfx-card',
            onClick:()=>Analytics.track('dish',d.name),
            style:{background:c.card,border:`1px solid ${c.border}`}},
            h('div',{className:'nfx-img',style:{background:d.bg}},
              h('div',{className:'nfx-img-overlay'}),
              h('div',{style:{zIndex:1,filter:'drop-shadow(0 8px 16px rgba(0,0,0,.5))'}},d.e),
              d.name===dailyTop.name&&h('div',{style:{position:'absolute',bottom:8,left:10,background:'linear-gradient(135deg,#E8520A,#C9A84C)',color:'#fff',fontSize:8,fontWeight:800,padding:'2px 9px',borderRadius:100,letterSpacing:'.1em',fontFamily:'Inter,sans-serif',zIndex:3,boxShadow:'0 2px 10px rgba(232,82,10,.5)'}},'ðŸ”¥ DIA'),
              h('button',{onClick:ev=>{ev.preventDefault();ev.stopPropagation();setFavs(f=>({...f,[idx]:!f[idx]}));},
                style:{position:'absolute',top:8,right:8,width:28,height:28,background:'rgba(0,0,0,.7)',border:'none',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer',fontSize:12,color:favs[idx]?'#E8520A':'rgba(255,255,255,.6)',transition:'all .2s',zIndex:3}},
                favs[idx]?'â™¥':'â™¡')
            ),
            h('div',{className:'nfx-body'},
              h('div',{className:'nfx-from'},d.from),
              h('div',{className:'nfx-name',style:{color:c.cream}},d.name),
              h('div',{className:'nfx-meta'},
                h('div',{className:'nfx-price',style:{color:c.cream}},h('sup',null,'R$'),d.price),
                h('div',{style:{display:'flex',gap:6,alignItems:'center'}},
                  h('span',{style:{fontSize:10,color:c.gold,fontFamily:'Inter,sans-serif',fontWeight:600}},d.stars+'â­'),
                  h('span',{style:{fontSize:9,color:d.frete==='GrÃ¡tis'?'#2ecc71':c.muted,fontFamily:'Inter,sans-serif',fontWeight:500}},d.frete)
                )
              )
            )
          );
        })
      ),
      h('button',{className:'nfx-arrow nfx-arrow-r',onClick:()=>scroll(1)},'â€º')
    )
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   APP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function App(){
  const [rdy,  setRdy]  =useState(false);
  const [dark, setDark] =useState(true);
  const [sc,   setSc]   =useState(false);
  const [top,  setTop]  =useState(false);
  const [filt, setFilt] =useState('Todos');
  const [favs, setFavs] =useState({});
  const [bnr,  setBnr]  =useState(true);
  const [tIdx, setTIdx] =useState(0);
  const [srch, setSrch]    =useState('');
  const [adminOpen,setAdminOpen]=useState(false);
  const [logoTaps,setLogoTaps] =useState(0);
  const [geoData,setGeoData]   =useState(null);
  const [heatOn, setHeatOn]    =useState(false);
  const logoTapTimer=useRef(null);

  const open=storeOpen();
  const c=pal(dark);
  const todayI=new Date().getDay()===0?6:new Date().getDay()-1;
  // NLP search â†’ filter dishes
  const rawDishes=filt==='Todos'?DISHES:DISHES.filter(d=>d.tag===filt);
  const nlpDishes=srch?NLP.filterDishes(rawDishes,srch):rawDishes;
  // Personalization: sort by click analytics
  const dishes=Analytics.sort('dish',nlpDishes,'name');
  // Daily top dish
  const dailyTop=getDailyTop(DISHES);

  // scroll listener
  useEffect(()=>{
    const fn=()=>{setSc(window.scrollY>55);setTop(window.scrollY>380);};
    window.addEventListener('scroll',fn,{passive:true});
    return()=>window.removeEventListener('scroll',fn);
  },[]);

  // Geolocation detection
  useEffect(()=>{Geo.detect().then(g=>g&&setGeoData(g));},[]);

  // Schedule push notification
  useEffect(()=>{if(rdy)Notif.scheduleWelcome();},[rdy]);

  // Heatmap click tracking
  useEffect(()=>{
    if(!rdy)return;
    const fn=e=>{
      Analytics.heatClick(e.clientX,e.clientY);
      if(heatOn)spawnHeatDot(e.clientX,e.clientY);
    };
    document.addEventListener('click',fn);
    return()=>document.removeEventListener('click',fn);
  },[rdy,heatOn]);

  // A/B test variant for hero CTA
  const abVariant=AB.variant('hero_cta',['A','B','C']);
  const ctaLabels={'A':'ðŸ½ Explorar Pratos','B':'ðŸ”¥ Ver os Melhores','C':'ðŸ• Pedir Agora'};
  const ctaLabel=ctaLabels[abVariant]||ctaLabels['A'];

  // Logo tap counter (5 taps = admin panel)
  const handleLogoTap=()=>{
    setLogoTaps(n=>{
      const next=n+1;
      clearTimeout(logoTapTimer.current);
      if(next>=5){setAdminOpen(true);Toast.show('ðŸ” Painel admin desbloqueado!');return 0;}
      logoTapTimer.current=setTimeout(()=>setLogoTaps(0),2000);
      return next;
    });
  };

  // testimonial rotation (isolated timer, still causes App re-render but testimonials are cheap)
  useEffect(()=>{
    const id=setInterval(()=>setTIdx(t=>(t+1)%TESTIMONIALS.length),5500);
    return()=>clearInterval(id);
  },[]);

  // boot cursor & progress after load
  useEffect(()=>{
    if(rdy){const c1=bootCursor();const c2=bootProgress();return()=>{c1&&c1();c2&&c2();};}
  },[rdy]);

  if(!rdy) return h(Loader,{onDone:()=>{
    document.getElementById('ldr').classList.add('out');
    setTimeout(()=>setRdy(true),900);
  }});

  /* â”€â”€ helpers â”€â”€ */
  const hov3d=(el,e)=>applyTilt(el,e);
  const rst3d=el=>resetTilt(el);
  const btn=(el,on)=>{
    el.style.transform=on?'translateY(-7px)':'translateY(0)';
    el.style.borderColor=on?c.bHov:c.border;
    el.style.boxShadow=on?`0 28px 56px ${c.sh}`:'none';
  };

  return h(Fragment,null,
    h(Leaves),
    h(NotifStrip),
    h(AdminDashboard,{c,open:adminOpen,onClose:()=>setAdminOpen(false),dishes:DISHES,restaurants:RESTAURANTS}),
    h(ChefChat),
    heatOn&&h('div',{className:'ab-badge',onClick:()=>{setHeatOn(false);Toast.show('ðŸ—º Heatmap desativado');}},'ðŸ—º HEATMAP ON'),
    !heatOn&&rdy&&h('div',{className:'ab-badge',title:'Variante A/B: '+abVariant,onClick:()=>{setHeatOn(true);Toast.show('ðŸ—º Heatmap ativado! Clique em qualquer lugar');}},'A/B: '+abVariant),

    h('div',{style:{background:c.bg,fontFamily:"'Inter',sans-serif",color:c.text,overflowX:'hidden',transition:'background .6s,color .6s'}},

/* â•â•â•â• PROMO BANNER â•â•â•â• */
      bnr&&h('div',{style:{background:'linear-gradient(90deg,#6a1a00,#E8520A,#C9A84C,#E8520A,#6a1a00)',backgroundSize:'300% 100%',animation:'bannerFlow 7s linear infinite',color:'#fff',padding:'10px 52px 10px 20px',fontSize:11,fontWeight:600,fontFamily:'Inter,sans-serif',textAlign:'center',position:'relative',letterSpacing:'.06em'}},
        'ðŸŽ‰ Primeira entrega com ',h('span',{style:{background:'rgba(255,255,255,.22)',padding:'2px 11px',borderRadius:100,fontWeight:800}},'30% OFF'),' â€” SÃ³ para novos usuÃ¡rios do iFood!',
        h('button',{onClick:()=>setBnr(false),style:{position:'absolute',right:14,top:'50%',transform:'translateY(-50%)',background:'none',border:'none',color:'rgba(255,255,255,.75)',cursor:'pointer',fontSize:20,lineHeight:1}},'Ã—')
      ),

/* â•â•â•â• NAV â•â•â•â• */
      h('nav',{className:'sabores-nav',style:{position:'sticky',top:0,zIndex:500,background:c.nav,backdropFilter:'blur(28px)',WebkitBackdropFilter:'blur(28px)',borderBottom:`1px solid ${c.border}`,padding:sc?'10px 28px':'18px 28px',display:'flex',justifyContent:'space-between',alignItems:'center',gap:12,transition:'padding .4s cubic-bezier(.22,1,.36,1),box-shadow .4s',boxShadow:sc?'0 8px 40px rgba(0,0,0,.38)':'none'}},
        h('a',{href:'#',className:'nav-logo',onClick:handleLogoTap,style:{fontFamily:"'Playfair Display',serif",fontSize:sc?21:28,fontWeight:900,color:c.cream,textDecoration:'none',transition:'font-size .35s',flexShrink:0,letterSpacing:'-1px'}},
          'Sabo',h('span',{style:{color:c.orange,fontStyle:'italic'}},'res')
        ),
        h('div',{className:'nav-status',style:{display:'flex',alignItems:'center',gap:7,padding:'5px 13px',borderRadius:100,background:'rgba(255,255,255,.05)',border:`1px solid ${c.border}`,flexShrink:0}},
          h('span',{style:{width:7,height:7,borderRadius:'50%',background:open?'#2ecc71':'#e74c3c',boxShadow:open?'0 0 9px #2ecc71':'none',animation:open?'pulse 2s infinite':'none',display:'inline-block'}}),
          h('span',{style:{fontSize:10,fontWeight:600,color:open?'#2ecc71':'#e74c3c',fontFamily:'Inter,sans-serif',whiteSpace:'nowrap',letterSpacing:'.06em'}},open?'Aberto agora':'Fechado hoje')
        ),
        h('div',{style:{display:'flex',gap:8,alignItems:'center',marginLeft:'auto'}},
          h('button',{'data-h':1,className:'nav-theme',onClick:()=>setDark(d=>!d),style:{background:'none',border:`1px solid ${c.border}`,borderRadius:'50%',cursor:'pointer',width:38,height:38,display:'flex',alignItems:'center',justifyContent:'center',fontSize:16,color:c.gold,transition:'all .3s',flexShrink:0}},dark?'â˜€ï¸':'ðŸŒ™'),
          h('a',{'data-h':1,className:'nav-cta',href:'https://www.ifood.com.br',target:'_blank',rel:'noreferrer',style:{background:`linear-gradient(135deg,${c.orange},${c.orangeD})`,color:'#fff',padding:'10px 22px',borderRadius:100,fontSize:12,fontWeight:700,textDecoration:'none',display:'flex',alignItems:'center',gap:7,fontFamily:'Inter,sans-serif',whiteSpace:'nowrap',letterSpacing:'.05em',boxShadow:'0 4px 24px rgba(232,82,10,.38)',transition:'box-shadow .3s,transform .25s',flexShrink:0},
            onMouseEnter:e=>{e.currentTarget.style.transform='translateY(-2px)';e.currentTarget.style.boxShadow='0 10px 40px rgba(232,82,10,.55)';},
            onMouseLeave:e=>{e.currentTarget.style.transform='none';e.currentTarget.style.boxShadow='0 4px 24px rgba(232,82,10,.38)';}},
            'ðŸ›µ Pedir no iFood'
          )
        )
      ),

/* â•â•â•â• HERO â•â•â•â• */
      h('section',{className:'grain',style:{minHeight:'92vh',display:'flex',alignItems:'center',padding:'88px 28px 104px',position:'relative',overflow:'hidden',background:`radial-gradient(ellipse 100% 80% at 65% 25%,rgba(232,82,10,.09) 0%,transparent 55%),radial-gradient(ellipse 60% 50% at 15% 85%,rgba(201,168,76,.055) 0%,transparent 50%),${c.bg}`}},
        // grid lines
        h('div',{style:{position:'absolute',inset:0,backgroundImage:`linear-gradient(${c.border} 1px,transparent 1px),linear-gradient(90deg,${c.border} 1px,transparent 1px)`,backgroundSize:'64px 64px',opacity:.45,pointerEvents:'none',zIndex:1}}),
        // orbs
        h('div',{style:{position:'absolute',top:'8%',right:'4%',width:440,height:440,borderRadius:'50%',background:'radial-gradient(circle,rgba(232,82,10,.08) 0%,transparent 65%)',animation:'orbDrift 13s ease-in-out infinite',pointerEvents:'none',zIndex:1}}),
        h('div',{style:{position:'absolute',bottom:'12%',left:'-2%',width:300,height:300,borderRadius:'50%',background:'radial-gradient(circle,rgba(201,168,76,.065) 0%,transparent 65%)',animation:'orbDrift 18s ease-in-out infinite reverse',pointerEvents:'none',zIndex:1}}),

        h('div',{style:{position:'relative',zIndex:2,maxWidth:1200,width:'100%',margin:'0 auto',display:'grid',gridTemplateColumns:'1fr auto',gap:48,alignItems:'center'},className:'hero-grid'},
          h('div',{style:{maxWidth:720}},
            h('div',{style:{display:'inline-flex',alignItems:'center',gap:9,background:'rgba(232,82,10,.1)',border:'1px solid rgba(232,82,10,.32)',padding:'8px 20px',borderRadius:100,marginBottom:36,animation:'fadeUp .8s .2s cubic-bezier(.22,1,.36,1) both'}},
              h('span',{style:{width:6,height:6,background:c.orange,borderRadius:'50%',animation:'pulse 2s infinite',display:'inline-block'}}),
              h('span',{style:{fontSize:11,letterSpacing:'.16em',textTransform:'uppercase',color:c.orangeL,fontFamily:'Inter,sans-serif',fontWeight:600}},'Curadoria gastronÃ´mica de elite')
            ),
            geoData&&h('div',{className:'geo-badge',style:{marginBottom:16}},'ðŸ“ Detectado: ',h('strong',null,geoData.city||'SÃ£o Paulo'),' Â· Restaurantes disponÃ­veis'),
            h('h1',{className:'hero-h1',style:{fontFamily:"'Playfair Display',serif",fontSize:'clamp(44px,7.5vw,88px)',fontWeight:900,lineHeight:.95,color:c.cream,marginBottom:26,letterSpacing:'-3px',animation:'fadeUp .85s .35s cubic-bezier(.22,1,.36,1) both',minHeight:'2.1em'}},
              'Cada prato,',h('br'),h('span',{style:{display:'inline-block',marginTop:4}},h(TypeWriter,{color:c.orange}))
            ),
            h('p',{style:{fontSize:16,lineHeight:1.8,color:c.muted,maxWidth:540,marginBottom:44,fontFamily:'Inter,sans-serif',fontWeight:300,animation:'fadeUp .85s .5s cubic-bezier(.22,1,.36,1) both'}},
              'Descubra experiÃªncias culinÃ¡rias Ãºnicas curadas por especialistas. Do prato Ã  sua porta, pelo iFood, em minutos.'
            ),
            h('div',{style:{display:'flex',gap:14,flexWrap:'wrap',animation:'fadeUp .85s .65s cubic-bezier(.22,1,.36,1) both'}},
              h('a',{'data-h':1,href:'#pratos',onClick:()=>{AB.convert('hero_cta');Analytics.track('cta','hero');},style:{background:`linear-gradient(135deg,${c.orange},${c.orangeD})`,color:'#fff',padding:'16px 38px',borderRadius:100,fontSize:14,fontWeight:700,textDecoration:'none',fontFamily:'Inter,sans-serif',letterSpacing:'.05em',boxShadow:'0 8px 36px rgba(232,82,10,.45)',transition:'all .3s cubic-bezier(.22,1,.36,1)'},
                onMouseEnter:e=>{e.currentTarget.style.transform='translateY(-3px) scale(1.03)';e.currentTarget.style.boxShadow='0 18px 52px rgba(232,82,10,.58)';},
                onMouseLeave:e=>{e.currentTarget.style.transform='none';e.currentTarget.style.boxShadow='0 8px 36px rgba(232,82,10,.45)';}},
                ctaLabel
              ),
              h('a',{'data-h':1,href:'#como',style:{color:c.muted,padding:'16px 28px',borderRadius:100,fontSize:13,textDecoration:'none',border:`1px solid ${c.border}`,fontFamily:'Inter,sans-serif',letterSpacing:'.05em',transition:'all .3s'},
                onMouseEnter:e=>{e.currentTarget.style.borderColor=c.bHov;e.currentTarget.style.color=c.cream;e.currentTarget.style.background='rgba(232,82,10,.06)';},
                onMouseLeave:e=>{e.currentTarget.style.borderColor=c.border;e.currentTarget.style.color=c.muted;e.currentTarget.style.background='transparent';}},
                'Como funciona â†’'
              )
            )
          ),
          h('div',{className:'hero-floats',style:{display:'flex',flexDirection:'column',gap:14,animation:'fadeUp .85s .8s cubic-bezier(.22,1,.36,1) both'}},
            ...['ðŸ• +2.8k pedidos hoje','ðŸ” Wagyu Smash â€” chegou!','â­ 4.9 Â· Melhor da cidade','ðŸ›µ 18 min tempo mÃ©dio'].map((t,i)=>
              h('div',{key:i,style:{background:'rgba(255,255,255,.05)',backdropFilter:'blur(18px)',border:`1px solid ${c.border}`,borderRadius:14,padding:'13px 20px',fontSize:12,color:c.text,fontFamily:'Inter,sans-serif',whiteSpace:'nowrap',animation:`floatY ${3+i*.6}s ease-in-out infinite`,animationDelay:i*.35+'s',letterSpacing:'.02em'}},t)
            )
          )
        )
      ),

/* â•â•â•â• STATS â•â•â•â• */
      h('section',{style:{padding:'72px 28px',borderTop:`1px solid ${c.div}`,background:c.bg2}},
        h('div',{className:'stats-grid',style:{display:'grid',gridTemplateColumns:'repeat(4,1fr)',maxWidth:1000,margin:'0 auto'}},
          ...STATS.map((s,i)=>h(Rv,{key:i,delay:i*.07,style:{padding:'0 36px',textAlign:'center',borderRight:i<3?`1px solid ${c.div}`:'none'}},
            h('div',{style:{fontSize:34,marginBottom:10}},s.i),
            h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:'clamp(38px,5vw,60px)',fontWeight:900,color:c.cream,lineHeight:1,marginBottom:8,letterSpacing:'-3px'}},
              h(Counter,{target:s.v,suffix:s.s})
            ),
            h('div',{style:{fontSize:11,color:c.muted,fontFamily:'Inter,sans-serif',letterSpacing:'.12em',textTransform:'uppercase',fontWeight:500}},s.l)
          ))
        )
      ),

/* â•â•â•â• SABOR DO MOMENTO â•â•â•â• */
      h(MomentoSection,{c}),

/* â•â•â•â• COMO FUNCIONA â•â•â•â• */
      h('section',{id:'como',style:{padding:'96px 28px',background:c.bg,borderTop:`1px solid ${c.div}`}},
        h('div',{style:{maxWidth:1100,margin:'0 auto'}},
          h(Rv,null,h(SH,{label:'Simples assim',title:'Como',accent:'funciona',c})),
          h('div',{className:'how-grid',style:{display:'grid',gridTemplateColumns:'repeat(3,1fr)',gap:24}},
            ...HOW.map((hw,i)=>h(Rv,{key:i,delay:i*.1},
              h('div',{style:{background:c.card,border:`1px solid ${c.border}`,borderRadius:24,padding:'40px 36px',position:'relative',overflow:'hidden',transition:'all .4s cubic-bezier(.22,1,.36,1)'},
                onMouseEnter:e=>{e.currentTarget.style.borderColor=c.bHov;e.currentTarget.style.transform='translateY(-6px)';e.currentTarget.style.boxShadow=`0 28px 56px ${c.sh}`;},
                onMouseLeave:e=>{e.currentTarget.style.borderColor=c.border;e.currentTarget.style.transform='none';e.currentTarget.style.boxShadow='none';}},
                h('div',{style:{position:'absolute',top:20,right:24,fontFamily:"'Playfair Display',serif",fontSize:56,fontWeight:900,color:c.orange,opacity:.07,lineHeight:1,letterSpacing:'-3px'}},hw.n),
                h('div',{style:{fontSize:40,marginBottom:20}},hw.icon),
                h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:24,fontWeight:700,color:c.cream,marginBottom:12,letterSpacing:'-.5px'}},hw.title),
                h('div',{style:{fontSize:14,color:c.muted,lineHeight:1.75,fontFamily:'Inter,sans-serif',fontWeight:300}},hw.desc),
                i<HOW.length-1&&h('div',{style:{position:'absolute',right:-14,top:'50%',transform:'translateY(-50%)',width:28,height:28,borderRadius:'50%',background:c.orange,display:'flex',alignItems:'center',justifyContent:'center',color:'#fff',fontSize:12,zIndex:2,boxShadow:`0 4px 16px rgba(232,82,10,.4)`}},'â†’')
              )
            ))
          )
        )
      ),

/* â•â•â•â• CATEGORIAS â•â•â•â• */
      h('section',{id:'categorias',style:{padding:'96px 28px',background:c.bg2,borderTop:`1px solid ${c.div}`}},
        h('div',{style:{maxWidth:1200,margin:'0 auto'}},
          h(Rv,null,h(SH,{label:'CulinÃ¡ria mundial',title:'Explore por',accent:'categoria',c})),
          h('div',{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill,minmax(90px,1fr))',gap:12}},
            ...CATS.map((cat,i)=>h(Rv,{key:i,delay:i*.025},
              h('a',{'data-h':1,href:iurl(cat.q),target:'_blank',rel:'noreferrer',style:{display:'flex',flexDirection:'column',alignItems:'center',gap:10,padding:'24px 10px',borderRadius:18,background:c.card,border:`1px solid ${c.border}`,textDecoration:'none',transition:'all .38s cubic-bezier(.22,1,.36,1)',position:'relative',overflow:'hidden'},
                onMouseEnter:e=>{e.currentTarget.style.background=c.card2;e.currentTarget.style.borderColor=c.bHov;e.currentTarget.style.transform='translateY(-7px) scale(1.05)';e.currentTarget.style.boxShadow=`0 20px 40px ${c.sh}`;},
                onMouseLeave:e=>{e.currentTarget.style.background=c.card;e.currentTarget.style.borderColor=c.border;e.currentTarget.style.transform='none';e.currentTarget.style.boxShadow='none';}},
                h('span',{style:{fontSize:32}},cat.e),
                h('span',{style:{fontSize:10,color:c.muted,fontFamily:'Inter,sans-serif',textAlign:'center',fontWeight:500,letterSpacing:'.03em'}},cat.l)
              )
            ))
          )
        )
      ),

/* â•â•â•â• SEARCH BAR â•â•â•â• */
      h('section',{style:{padding:'0 0 40px',background:c.bg}},
        h('div',{style:{maxWidth:1200,margin:'0 auto',padding:'0 4px'}},
          h(SearchBar,{c,onSearch:setSrch,onFilter:setFilt}),
          srch&&h('div',{style:{textAlign:'center',marginTop:12,fontSize:11,color:c.muted,fontFamily:'Inter,sans-serif',letterSpacing:'.08em'}},'ðŸ¤– NLP: ',h('em',{style:{color:c.orangeL}},'"'+srch+'"'),' â†’ '+dishes.length+' resultado'+(dishes.length!==1?'s':''))
        )
      ),

/* â•â•â•â• PRATOS (NETFLIX ROWS) â•â•â•â• */
      h('section',{id:'pratos',style:{paddingTop:60,paddingBottom:32,background:c.bg}},
        h(Rv,{style:{padding:'0 28px',maxWidth:1200,margin:'0 auto',marginBottom:40}},
          h('div',{style:{display:'flex',flexWrap:'wrap',alignItems:'flex-end',justifyContent:'space-between',gap:16}},
            h(SH,{label:'Curadoria especial',title:'Pratos em',accent:'destaque',c}),
            h('div',{style:{display:'flex',gap:8,flexWrap:'wrap'}},
              ...FILTERS.map(f=>h('button',{'data-h':1,key:f,onClick:()=>setFilt(f),
                style:{background:filt===f?`linear-gradient(135deg,${c.orange},${c.orangeD})`:'transparent',
                  color:filt===f?'#fff':c.muted,border:`1px solid ${filt===f?c.orange:c.border}`,
                  padding:'8px 20px',borderRadius:100,fontSize:11,fontWeight:600,cursor:'pointer',
                  fontFamily:'Inter,sans-serif',transition:'all .28s',whiteSpace:'nowrap',
                  letterSpacing:'.05em',boxShadow:filt===f?'0 4px 18px rgba(232,82,10,.32)':'none'}},f))
            )
          )
        ),
        srch&&h('div',{style:{padding:'0 28px 24px',textAlign:'center',fontSize:11,color:c.muted,fontFamily:'Inter,sans-serif',letterSpacing:'.08em'}},'ðŸ¤– ',h('em',{style:{color:c.orangeL}},'"'+srch+'"'),' â†’ '+dishes.length+' resultado'+(dishes.length!==1?'s':'')),
        // Row 1: Mais pedidos / todos
        h(NetflixRow,{title:'Em destaque',accent:'agora',label:'Ver todos',
          dishes:dishes.slice(0,Math.max(dishes.length,4)),
          c,favs,setFavs,dailyTop,offset:0}),
        // Row 2: Premium picks (top rated)
        h(NetflixRow,{title:'Escolha do',accent:'chef',label:'Premium',
          dishes:[...DISHES].sort((a,b)=>b.stars-a.stars).slice(0,6),
          c,favs,setFavs,dailyTop,offset:10}),
        // Row 3: RÃ¡pidos (menor tempo)
        h(NetflixRow,{title:'Pronto em',accent:'minutos',label:'Entrega rÃ¡pida',
          dishes:[...DISHES].sort((a,b)=>parseInt(a.time)-parseInt(b.time)),
          c,favs,setFavs,dailyTop,offset:20}),
        // Row 4: Frete grÃ¡tis
        h(NetflixRow,{title:'Frete',accent:'grÃ¡tis',label:'Economize',
          dishes:DISHES.filter(d=>d.frete==='GrÃ¡tis'),
          c,favs,setFavs,dailyTop,offset:30})
      ),

/* â•â•â•â• DRINKS â•â•â•â• */
      h(DrinkSlider,{c}),

/* â•â•â•â• PROMO â•â•â•â• */
      h('section',{style:{padding:'40px 28px 96px',background:c.bg}},
        h(Rv,null,
          h('div',{className:'promo-grid',style:{maxWidth:1100,margin:'0 auto',background:c.card,border:`1px solid ${c.bHov}`,borderRadius:32,padding:'64px 56px',display:'grid',gridTemplateColumns:'1fr 1fr',gap:52,alignItems:'center',position:'relative',overflow:'hidden'}},
            h('div',{style:{position:'absolute',top:-100,right:-100,width:400,height:400,borderRadius:'50%',background:'radial-gradient(circle,rgba(232,82,10,.12) 0%,transparent 60%)',pointerEvents:'none'}}),
            h('div',{style:{position:'relative',zIndex:1}},
              h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:'clamp(64px,12vw,120px)',fontWeight:900,color:c.orange,lineHeight:.85,marginBottom:18,letterSpacing:'-5px'}},'-30%'),
              h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:'clamp(22px,3vw,36px)',fontWeight:700,color:c.cream,marginBottom:16,letterSpacing:'-.5px'}},'Primeira entrega',h('br'),'com desconto.'),
              h('p',{style:{fontSize:14,color:c.muted,lineHeight:1.75,marginBottom:36,fontFamily:'Inter,sans-serif',fontWeight:300,maxWidth:400}},'FaÃ§a seu primeiro pedido pelo iFood e ganhe 30% de desconto em qualquer restaurante da nossa curadoria premium.'),
              h('a',{'data-h':1,href:'https://www.ifood.com.br',target:'_blank',rel:'noreferrer',style:{background:`linear-gradient(135deg,${c.orange},${c.orangeD})`,color:'#fff',padding:'16px 38px',borderRadius:100,fontSize:14,fontWeight:700,textDecoration:'none',display:'inline-flex',alignItems:'center',gap:10,fontFamily:'Inter,sans-serif',letterSpacing:'.05em',boxShadow:'0 8px 36px rgba(232,82,10,.42)',transition:'all .3s'},
                onMouseEnter:e=>{e.currentTarget.style.transform='translateY(-3px)';e.currentTarget.style.boxShadow='0 16px 52px rgba(232,82,10,.58)';},
                onMouseLeave:e=>{e.currentTarget.style.transform='none';e.currentTarget.style.boxShadow='0 8px 36px rgba(232,82,10,.42)';}},
                'ðŸŽ Resgatar desconto no iFood'
              )
            ),
            h('div',{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:14,position:'relative',zIndex:1}},
              ...DISHES.slice(0,4).map((d,i)=>h('div',{key:i,style:{background:'rgba(255,255,255,.04)',border:`1px solid ${c.border}`,borderRadius:18,padding:'20px',textAlign:'center',transition:'all .3s'},
                onMouseEnter:e=>{e.currentTarget.style.borderColor=c.bHov;e.currentTarget.style.transform='scale(1.04)';},
                onMouseLeave:e=>{e.currentTarget.style.borderColor=c.border;e.currentTarget.style.transform='none';}},
                h('div',{style:{fontSize:30,marginBottom:7}},d.e),
                h('div',{style:{fontSize:10,color:c.muted,fontFamily:'Inter,sans-serif',fontWeight:500,letterSpacing:'.04em',textTransform:'uppercase'}},d.e.includes('ðŸ•')?'Pizza':d.e.includes('ðŸ±')?'Sushi':d.e.includes('ðŸ”')?'Burger':'Churrasco')
              ))
            )
          )
        )
      ),

/* â•â•â•â• RESTAURANTES â•â•â•â• */
      h('section',{id:'restaurantes',style:{padding:'0 28px 96px',background:c.bg}},
        h('div',{style:{maxWidth:1200,margin:'0 auto'}},
          h(Rv,null,h(SH,{label:'Parceiros exclusivos',title:'Restaurantes em',accent:'destaque',c})),
          h('div',{className:'ns',style:{display:'flex',gap:16,overflowX:'auto',paddingBottom:10}},
            ...RESTAURANTS.map((r,i)=>h(Rv,{key:i,delay:i*.05},
              h('a',{'data-h':1,href:iurl(r.q),target:'_blank',rel:'noreferrer',onClick:()=>Analytics.track('rest',r.name),style:{flex:'0 0 220px',background:c.card,border:`1px solid ${c.border}`,borderRadius:22,padding:26,textDecoration:'none',transition:'all .38s cubic-bezier(.22,1,.36,1)',display:'block'},
                onMouseEnter:e=>{e.currentTarget.style.transform='translateY(-7px)';e.currentTarget.style.borderColor=c.bHov;e.currentTarget.style.boxShadow=`0 28px 56px ${c.sh}`;},
                onMouseLeave:e=>{e.currentTarget.style.transform='none';e.currentTarget.style.borderColor=c.border;e.currentTarget.style.boxShadow='none';}},
                h('div',{style:{fontSize:38,marginBottom:16}},r.icon),
                h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:17,fontWeight:700,color:c.cream,marginBottom:5,letterSpacing:'-.4px'}},r.name),
                h('div',{style:{fontSize:11,color:c.muted,marginBottom:16,fontFamily:'Inter,sans-serif',fontWeight:300}},r.type),
                h('div',{style:{display:'flex',flexWrap:'wrap',gap:5,marginBottom:18}},
                  ...r.tags.map((t,j)=>h('span',{key:j,style:{padding:'3px 10px',background:'rgba(232,82,10,.08)',border:'1px solid rgba(232,82,10,.2)',borderRadius:100,fontSize:9,color:c.orangeL,fontFamily:'Inter,sans-serif',fontWeight:500,letterSpacing:'.04em'}},t))
                ),
                h('div',{style:{display:'flex',justifyContent:'space-between',paddingTop:16,borderTop:`1px solid ${c.div}`}},
                  h('div',null,h('strong',{style:{fontSize:15,color:c.cream,fontFamily:'Inter,sans-serif',display:'block',fontWeight:700}},r.rating+' â­'),h('span',{style:{fontSize:9,color:c.muted,fontFamily:'Inter,sans-serif',textTransform:'uppercase',letterSpacing:'.1em'}},'avaliaÃ§Ã£o')),
                  h('div',{style:{textAlign:'right'}},h('strong',{style:{fontSize:15,color:c.orange,fontFamily:'Inter,sans-serif',display:'block',fontWeight:700}},r.orders),h('span',{style:{fontSize:9,color:c.muted,fontFamily:'Inter,sans-serif',textTransform:'uppercase',letterSpacing:'.1em'}},'pedidos'))
                )
              )
            ))
          )
        )
      ),

/* â•â•â•â• DEPOIMENTOS â•â•â•â• */
      h('section',{style:{padding:'96px 28px',background:c.bg2,borderTop:`1px solid ${c.div}`}},
        h('div',{style:{maxWidth:860,margin:'0 auto'}},
          h(Rv,null,h(SH,{label:'O que dizem',title:'Quem nos',accent:'escolheu',c,center:true})),
          h('div',{style:{position:'relative'}},
            ...TESTIMONIALS.map((t,i)=>h('div',{key:i,style:{display:tIdx===i?'block':'none',animation:tIdx===i?'scaleIn .55s cubic-bezier(.22,1,.36,1)':'none',background:c.card,border:`1px solid ${c.border}`,borderRadius:28,padding:'52px 56px',position:'relative',overflow:'hidden'}},
              h('div',{style:{position:'absolute',top:24,right:32,fontFamily:"'Playfair Display',serif",fontSize:96,color:c.orange,opacity:.08,lineHeight:1,pointerEvents:'none'}},'"'),
              h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:'clamp(18px,2.5vw,26px)',fontWeight:400,color:c.cream,lineHeight:1.6,marginBottom:40,fontStyle:'italic',position:'relative',zIndex:1}},'"'+t.text+'"'),
              h('div',{style:{display:'flex',alignItems:'center',gap:18}},
                h('div',{style:{width:54,height:54,borderRadius:'50%',background:`linear-gradient(135deg,${c.orange},${c.orangeD})`,display:'flex',alignItems:'center',justifyContent:'center',fontSize:26,flexShrink:0}},t.avatar),
                h('div',null,
                  h('div',{style:{fontFamily:'Inter,sans-serif',fontWeight:700,color:c.cream,fontSize:15,letterSpacing:'-.2px'}},t.name),
                  h('div',{style:{fontFamily:'Inter,sans-serif',fontSize:11,color:c.muted,marginTop:3,fontWeight:300}},t.role)
                ),
                h('div',{style:{marginLeft:'auto',color:c.gold,fontSize:15,letterSpacing:3}},'â˜…â˜…â˜…â˜…â˜…')
              )
            )),
            h('div',{style:{display:'flex',justifyContent:'center',gap:9,marginTop:32}},
              ...TESTIMONIALS.map((_,i)=>h('button',{'data-h':1,key:i,onClick:()=>setTIdx(i),style:{width:tIdx===i?26:7,height:7,borderRadius:100,background:tIdx===i?c.orange:'rgba(255,255,255,.18)',border:'none',cursor:'pointer',transition:'all .4s',padding:0,flexShrink:0}}))
            )
          )
        )
      ),

/* â•â•â•â• FOOTER â•â•â•â• */
      h('footer',{style:{background:dark?'#060402':'#180e05',padding:'88px 28px 44px',borderTop:`1px solid ${c.div}`}},
        h(Rv,null,
          h('div',{className:'footer-grid',style:{display:'grid',gridTemplateColumns:'2fr 1fr 1fr 1fr',gap:56,maxWidth:1100,margin:'0 auto 72px'}},
            h('div',null,
              h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:40,fontWeight:900,color:c.cream,marginBottom:14,letterSpacing:'-2px'}},'Sabo',h('span',{style:{color:c.orange,fontStyle:'italic'}},'res')),
              h('p',{style:{fontSize:13,color:c.muted,lineHeight:1.85,fontFamily:'Inter,sans-serif',fontWeight:300,maxWidth:255,marginBottom:32}},'A vitrine gastronÃ´mica mais sofisticada do Brasil. Todos os pedidos sÃ£o processados pelo iFood.'),
              h('div',{style:{display:'flex',gap:10}},
                ...['ðŸ“¸','ð•','ðŸ“˜'].map((ico,i)=>h('a',{key:i,href:'#','data-h':1,style:{width:40,height:40,background:'rgba(255,255,255,.05)',border:`1px solid ${c.border}`,borderRadius:11,display:'flex',alignItems:'center',justifyContent:'center',fontSize:16,textDecoration:'none',transition:'all .28s'},
                  onMouseEnter:e=>{e.currentTarget.style.background='rgba(232,82,10,.14)';e.currentTarget.style.borderColor=c.bHov;e.currentTarget.style.transform='translateY(-3px)';},
                  onMouseLeave:e=>{e.currentTarget.style.background='rgba(255,255,255,.05)';e.currentTarget.style.borderColor=c.border;e.currentTarget.style.transform='none';}},ico))
              )
            ),
            h('div',null,
              h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:19,color:c.gold,marginBottom:22,letterSpacing:'-.3px'}},'HorÃ¡rios'),
              h('ul',{style:{listStyle:'none'}},
                ...HOURS.map((hh,i)=>h('li',{key:i,style:{display:'flex',justifyContent:'space-between',padding:'6px 0',fontSize:12,color:i===todayI?c.gold:c.muted,fontWeight:i===todayI?600:300,fontFamily:'Inter,sans-serif',borderBottom:`1px solid ${c.div}`,letterSpacing:'.01em'}},
                  h('span',null,hh.day),h('span',{style:{opacity:.8}},hh.range)
                ))
              )
            ),
            h('div',null,
              h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:19,color:c.gold,marginBottom:22,letterSpacing:'-.3px'}},'Navegar'),
              ...[['ðŸ½ CardÃ¡pio','#pratos'],['ðŸ—‚ Categorias','#categorias'],['ðŸ¥¤ Bebidas','#bebidas'],['ðŸª Restaurantes','#restaurantes'],['âš¡ Como funciona','#como']].map(([l,href])=>
                h('a',{'data-h':1,key:l,href,style:{display:'block',fontSize:13,color:c.muted,textDecoration:'none',lineHeight:2.8,fontFamily:'Inter,sans-serif',fontWeight:300,transition:'color .22s,paddingLeft .22s'},
                  onMouseEnter:e=>{e.currentTarget.style.color=c.cream;e.currentTarget.style.paddingLeft='6px';},
                  onMouseLeave:e=>{e.currentTarget.style.color=c.muted;e.currentTarget.style.paddingLeft='0';}},l)
              )
            ),
            h('div',null,
              h('div',{style:{fontFamily:"'Playfair Display',serif",fontSize:19,color:c.gold,marginBottom:22,letterSpacing:'-.3px'}},'Contato'),
              h('div',{style:{fontFamily:'Inter,sans-serif',fontWeight:300}},
                ...[['ðŸ’¬ WhatsApp','https://wa.me/5511999999999','#2ecc71'],['âœ‰ï¸ E-mail','mailto:oi@sabores.com.br',c.cream],['ðŸ“ SÃ£o Paulo, SP','#',c.muted]].map(([l,href,hc])=>
                  h('a',{'data-h':1,key:l,href,target:href.startsWith('http')?'_blank':'_self',style:{display:'block',fontSize:13,color:c.muted,textDecoration:'none',lineHeight:2.8,transition:'color .22s'},
                    onMouseEnter:e=>e.currentTarget.style.color=hc,
                    onMouseLeave:e=>e.currentTarget.style.color=c.muted},l)
                )
              )
            )
          ),
          // footer bottom
          h('div',{style:{maxWidth:1100,margin:'0 auto',paddingTop:44,borderTop:`1px solid ${c.div}`,display:'flex',justifyContent:'space-between',alignItems:'center',flexWrap:'wrap',gap:20}},
            h('p',{style:{fontSize:11,color:c.muted,fontFamily:'Inter,sans-serif',letterSpacing:'.1em'}},'Â© '+new Date().getFullYear()+' Sabores Â· Todos os direitos reservados'),
            h('a',{'data-h':1,href:'https://www.ifood.com.br',target:'_blank',rel:'noreferrer',style:{background:`linear-gradient(135deg,${c.orange},${c.orangeD})`,color:'#fff',padding:'13px 30px',borderRadius:100,fontSize:13,fontWeight:700,textDecoration:'none',fontFamily:'Inter,sans-serif',letterSpacing:'.05em',boxShadow:'0 4px 24px rgba(232,82,10,.38)',transition:'all .28s'},
              onMouseEnter:e=>{e.currentTarget.style.transform='translateY(-2px)';e.currentTarget.style.boxShadow='0 10px 40px rgba(232,82,10,.55)';},
              onMouseLeave:e=>{e.currentTarget.style.transform='none';e.currentTarget.style.boxShadow='0 4px 24px rgba(232,82,10,.38)';}},
              'ðŸ›µ Ir para o iFood'
            )
          )
        )
      ),

/* â•â•â•â• FIXED: WHATSAPP â•â•â•â• */
      h('a',{'data-h':1,href:'https://wa.me/5511999999999',target:'_blank',rel:'noreferrer',style:{position:'fixed',bottom:24,right:24,width:54,height:54,background:'#25D366',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',fontSize:26,textDecoration:'none',zIndex:600,boxShadow:'0 4px 24px rgba(37,211,102,.48)',transition:'all .35s cubic-bezier(.22,1,.36,1)'},
        onMouseEnter:e=>{e.currentTarget.style.transform='scale(1.16) rotate(-12deg)';e.currentTarget.style.boxShadow='0 10px 44px rgba(37,211,102,.68)';},
        onMouseLeave:e=>{e.currentTarget.style.transform='none';e.currentTarget.style.boxShadow='0 4px 24px rgba(37,211,102,.48)';}
      },'ðŸ’¬'),

/* â•â•â•â• FIXED: BACK TO TOP â•â•â•â• */
      h('button',{'data-h':1,onClick:()=>window.scrollTo({top:0,behavior:'smooth'}),style:{position:'fixed',bottom:90,right:28,width:40,height:40,background:`linear-gradient(135deg,${c.orange},${c.orangeD})`,border:'none',borderRadius:'50%',color:'#fff',fontSize:17,cursor:'pointer',zIndex:600,opacity:top?1:0,transform:top?'scale(1) translateY(0)':'scale(.7) translateY(10px)',transition:'all .42s cubic-bezier(.22,1,.36,1)',pointerEvents:top?'auto':'none',boxShadow:'0 4px 20px rgba(232,82,10,.42)'}},'â†‘')

    ) // end main div
  ); // end Fragment
}

ReactDOM.createRoot(document.getElementById('root')).render(h(App));
</script>
</body>
</html>
